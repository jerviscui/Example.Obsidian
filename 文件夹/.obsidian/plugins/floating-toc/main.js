/*
	This is the Obsidian example vault is amazing, there are a lot of dazzling features and showcase, I believe you will wonder a bit, is this Obsidian?
	[Blue-topaz-examples](https://github.com/cumany/Blue-topaz-examples)
	*/

var ue=Object.create;var M=Object.defineProperty;var me=Object.getOwnPropertyDescriptor;var be=Object.getOwnPropertyNames;var ye=Object.getPrototypeOf,Ce=Object.prototype.hasOwnProperty;var N=n=>M(n,"__esModule",{value:!0});var ve=(n,e)=>{N(n);for(var s in e)M(n,s,{get:e[s],enumerable:!0})},Te=(n,e,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of be(e))!Ce.call(n,r)&&r!=="default"&&M(n,r,{get:()=>e[r],enumerable:!(s=me(e,r))||s.enumerable});return n},k=n=>Te(N(M(n!=null?ue(ye(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var w=(n,e,s)=>new Promise((r,a)=>{var o=l=>{try{i(s.next(l))}catch(d){a(d)}},t=l=>{try{i(s.throw(l))}catch(d){a(d)}},i=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,t);i((s=s.apply(n,e)).next())});ve(exports,{default:()=>P,refresh_node:()=>he,selfDestruct:()=>F});var p=k(require("obsidian"));var f=k(require("obsidian"));function O(n,e,s,r,a=null){return w(this,null,function*(){let o=/(?<=^\s*)[0-9]+\.\s/,t=/(?<=^\s*)[\-\+]\s/,i,l="";(i=o.exec(e))!==null?(l=i[0],e=e.replace(o,"")):(i=t.exec(e))!==null&&(l=i[0],e=e.replace(t,""));let d=s;yield f.MarkdownRenderer.renderMarkdown(e,d,r,a);let C=d.createEl("a");C.addClass("text"),C.onclick=function(g){var T;let c=(T=parseInt(d.parentElement.getAttribute("data-line")))!=null?T:0;if(g.ctrlKey)we(n,c);else{Se(n,c);let h=d.parentElement.parentElement.querySelector(".text-wrap.located");h&&h.removeClass("located"),d.addClass("located")}};let u=d.querySelector("p");if(u){let g=/<a[^>]*>|<\/[^>]*a>/gm;l?C.innerHTML=l+u.innerHTML.replace(g,""):C.innerHTML=u.innerHTML.replace(g,""),d.removeChild(u)}})}function V(n,e,s,r){return w(this,null,function*(){let a=e.createEl("li");a.addClass("heading-list-item"),a.setAttribute("data-level",s.level.toString()),a.setAttribute("data-id",r.toString()),a.setAttribute("data-line",s.position.start.line.toString());let o=a.createEl("div");o.addClass("text-wrap"),O(n,s.heading,o,n.file.path,null);let t=a.createEl("div");t.addClass("line-wrap"),t.createDiv().addClass("line")})}var Se=(n,e)=>{n.leaf.openFile(n.file,{eState:{line:e}})},we=(n,e)=>{var o,t;let s=(t=(o=n==null?void 0:n.currentMode.getFoldInfo())==null?void 0:o.folds)!=null?t:[],r=e,a=0;if(s.some((i,l)=>(a=l,i.from==r)))s.splice(a,1);else{let i={from:e,to:e+1};s.push(i)}n==null||n.currentMode.applyFoldInfo({folds:s,lines:n.editor.lineCount()}),n==null||n.onMarkdownFold()};function H(n,e){var a;let s=(o,t)=>{e.settings.positionStyle=="right"?(t.addClass("floating-right"),t.removeClass("floating-left")):e.settings.positionStyle=="left"&&(t.addClass("floating-left"),t.removeClass("floating-rigth")),e.settings.isLeft?(t.removeClass("alignLeft"),t.addClass("alignLeft")):t.removeClass("alignLeft");let i=t.createEl("ul");i.addClass("floating-toc");let l=i.createEl("div");l.addClass("toolbar"),l.addClass("pin"),l.addClass("hide"),new f.ButtonComponent(l).setIcon("pin").setTooltip("pin").onClick(()=>{t.classList.contains("pin")?t.removeClass("pin"):t.addClass("pin")}),i.onmouseenter=function(){l.removeClass("hide"),t.addClass("hover")},i.onmouseleave=function(){l.addClass("hide"),t.removeClass("hover")},new f.ButtonComponent(l).setIcon("double-up-arrow-glyph").setTooltip("Scroll to Top").setClass("top").onClick(()=>{let h=this.app.workspace.getActiveViewOfType(f.MarkdownView);h&&h.setEphemeralState({scroll:0})}),new f.ButtonComponent(l).setIcon("copy").setTooltip("copy to clipboard").setClass("copy").onClick(()=>w(this,null,function*(){let h=globalThis.headingdata.map(v=>"    ".repeat(v.level-1)+v.heading);yield navigator.clipboard.writeText(h.join(`
`)),new f.Notice("Copied")}));let g=n.workspace.getActiveFile(),c=n.metadataCache.getFileCache(g).headings,T=[];c==null||c.map(h=>{h.heading=h.heading.replace(/<\/?[\s\S]*?(?:".*")*>/g,""),T.push(h)}),globalThis.headingdata=T,globalThis.headingdata&&(e.settings.ignoreTopHeader&&(globalThis.headingdata=n.metadataCache.getFileCache(g).headings.slice(1)),globalThis.headingdata.forEach((h,v)=>{let m=n.workspace.getActiveViewOfType(f.MarkdownView);V(m,i,h,v)}),o==null||o.querySelector(".markdown-source-view").insertAdjacentElement("beforebegin",t))};if(this.app.workspace.getActiveViewOfType(f.MarkdownView)){(0,f.requireApiVersion)("0.15.0")?activeDocument=activeWindow.document:activeDocument=window.document;let o=e.app.workspace.getActiveViewOfType(f.MarkdownView);if((a=o.contentEl)==null?void 0:a.querySelector(".floating-toc-div"))return;{let i=createEl("div");i.addClass("floating-toc-div"),s(o.contentEl,i)}}}var E=k(require("obsidian"));var z=["left","right"],R={ignoreTopHeader:!1,positionStyle:"left",isLoadOnMobile:!0,isLeft:!1};var ge=k(require("obsidian"));var W={};var j={};var U={};var G={};var D={"Floating TOC position":"Floating TOC position","Floating TOC position, default on the left side of the notes":"Floating TOC position, default on the left side of the notes","Ignore top-level headers":"Ignore top-level headers","Select whether to ignore the top-level headings. When turned on, the top-level headings in the current note are not displayed in the floating TOC.":"Select whether to ignore the top-level headings. When turned on, the top-level headings in the current note are not displayed in the floating TOC.","Plugin Settings":"Plugin Settings","Plugin Style Settings":"Plugin Style Settings","Mobile enabled or not":"Mobile enabled or not","Whether to enable the plugin for the mobile client, the default is enabled.":"Whether to enable the plugin for the mobile client, the default is enabled.","If the floating Toc option is not found in the style setting, please reload the style setting plugin (turn it off and on again)":"If the floating Toc option is not found in the style setting, please reload the style setting plugin (turn it off and on again)","Left Aligned":"Left Aligned","whether it is left or right aligned When the floating toc is on the right":"whether it is left or right aligned When the floating toc is on the right"};var J={};var Y={};var $={};var K={};var Q={};var X={};var Z={};var ee={};var te={};var ne={};var ie={};var oe={};var le={};var ae={};var se={};var re={};var de={"Floating TOC position":"\u6D6E\u52A8\u76EE\u5F55\u663E\u793A\u4F4D\u7F6E","Floating TOC position, default on the left side of the notes":"\u6D6E\u52A8\u76EE\u5F55\u663E\u793A\u4F4D\u7F6E\uFF0C\u9ED8\u8BA4\u663E\u793A\u5728\u7B14\u8BB0\u5DE6\u4FA7","Ignore top-level headers":"\u662F\u5426\u5FFD\u7565\u9876\u7EA7\u76EE\u5F55","Select whether to ignore the top-level headings. When turned on, the top-level headings in the current note are not displayed in the floating TOC.":"\u9009\u62E9\u662F\u5426\u5FFD\u7565\u9876\u7EA7\u6807\u9898\uFF0C\u5F00\u542F\u540E\u5F53\u524D\u6587\u6863\u4E2D\u6700\u9876\u7EA7\u7684\u6807\u9898\u4E0D\u663E\u793A\u5728\u6D6E\u52A8\u76EE\u5F55\u4E2D\u3002","Plugin Settings":"\u63D2\u4EF6\u8BBE\u7F6E","Plugin Style Settings":"\u63D2\u4EF6\u6837\u5F0F\u8BBE\u7F6E","Mobile enabled or not":"\u662F\u5426\u5728\u79FB\u52A8\u7AEF\u542F\u7528","Whether to enable the plugin for the mobile client, the default is enabled.":"\u79FB\u52A8\u5BA2\u6237\u7AEF\u662F\u5426\u542F\u7528\u63D2\u4EF6\uFF0C\u9ED8\u8BA4\u542F\u7528\u3002","If the floating Toc option is not found in the style setting, please reload the style setting plugin (turn it off and on again)":"\u5982\u679Cstyle setting \u4E2D\u65E0\u6CD5\u770B\u5230 floating Toc\u9009\u9879\uFF0C\u8BF7\u91CD\u8F7Dstyle setting\u63D2\u4EF6\uFF08\u5173\u95ED\u518D\u5F00\u542F\u5373\u53EF\uFF09","Left Aligned":"\u5DE6\u5BF9\u9F50","whether it is left or right aligned When the floating toc is on the right":"\u5F53\u5DE5\u5177\u680F\u5728\u53F3\u4FA7\u65F6\uFF0C\u662F\u5426\u5DE6\u5BF9\u9F50"};var ce={};var Ee={ar:W,cs:j,da:U,de:G,en:D,"en-gb":J,es:Y,fr:$,hi:K,id:Q,it:X,ja:Z,ko:ee,nl:te,nn:ne,pl:ie,pt:oe,"pt-br":le,ro:ae,ru:se,tr:re,"zh-cn":de,"zh-tw":ce},pe=Ee[ge.moment.locale()];function b(n){return pe&&pe[n]||D[n]}var _=class extends E.PluginSettingTab{constructor(e,s){super(e,s);this.plugin=s,addEventListener("refresh-toc",()=>{F(),H(e,this.plugin)})}display(){let{containerEl:e}=this;e.empty(),e.createEl("h1",{text:"Obsidian Floating TOC "}),e.createEl("span",{text:""}).createEl("a",{text:"Author: Cuman \u2728",href:"https://github.com/cumany"}),e.createEl("span",{text:""}).createEl("a",{text:"Readme:\u4E2D\u6587",href:"https://github.com/cumany/obsidian-floating-toc-plugin/blob/master/README-zh_cn.md"}),e.createEl("span",{text:""}).createEl("a",{text:"|English  ",href:"https://github.com/cumany/obsidian-floating-toc-plugin/blob/master/README.md"}),e.createEl("p",{text:"\u{1F511}TIPS: "}).createEl("p",{text:"ctrl + click on the floating toc to collapse/expand the header."}),e.createEl("h2",{text:b("Plugin Settings")}),new E.Setting(e).setName(b("Floating TOC position")).setDesc(b("Floating TOC position, default on the left side of the notes")).addDropdown(t=>{let i={};z.map(l=>i[l]=l),t.addOptions(i),t.setValue(this.plugin.settings.positionStyle).onChange(l=>{this.plugin.settings.positionStyle=l,this.plugin.saveSettings(),setTimeout(()=>{this.display(),dispatchEvent(new Event("refresh-toc"))},100)})}),this.plugin.settings.positionStyle=="right"&&new E.Setting(e).setName(b("Left Aligned")).setDesc(b("whether it is left or right aligned When the floating toc is on the right")).addToggle(t=>{var i;return t.setValue((i=this.plugin.settings)==null?void 0:i.isLeft).onChange(l=>{this.plugin.settings.isLeft=l,this.plugin.saveSettings(),setTimeout(()=>{this.display(),dispatchEvent(new Event("refresh-toc"))},100)})}),new E.Setting(e).setName(b("Mobile enabled or not")).setDesc(b("Whether to enable the plugin for the mobile client, the default is enabled.")).addToggle(t=>{var i;return t.setValue((i=this.plugin.settings)==null?void 0:i.isLoadOnMobile).onChange(l=>{this.plugin.settings.isLoadOnMobile=l,this.plugin.saveSettings(),setTimeout(()=>{dispatchEvent(new Event("refresh-toc"))},100)})}),new E.Setting(e).setName(b("Ignore top-level headers")).setDesc(b("Select whether to ignore the top-level headings. When turned on, the top-level headings in the current note are not displayed in the floating TOC.")).addToggle(t=>{var i;return t.setValue((i=this.plugin.settings)==null?void 0:i.ignoreTopHeader).onChange(l=>{this.plugin.settings.ignoreTopHeader=l,this.plugin.saveSettings(),setTimeout(()=>{dispatchEvent(new Event("refresh-toc"))},100)})}),e.createEl("h2",{text:b("Plugin Style Settings")}),app.plugins.enabledPlugins.has("obsidian-style-settings")?(e.createEl("p",{text:"\u{1F514}Notice: "}).createEl("p",{text:b("If the floating Toc option is not found in the style setting, please reload the style setting plugin (turn it off and on again)")}),new E.ButtonComponent(e).setIcon("palette").setClass("tiny").setButtonText("\u{1F3A8} Open style settings").onClick(()=>{app.setting.open(),setTimeout(()=>app.setting.openTabById("obsidian-style-settings"),300)})):e.createEl("span",{text:""}).createEl("a",{text:"Please install or enable the style-settings plugin",href:"obsidian://show-plugin?id=obsidian-style-settings"});let r=e.createEl("div",{cls:"cDonationSection"}),a=createEl("p"),o=createEl("p");o.appendText("If you like this Plugin and are considering donating to support continued development, use the button below!"),a.setAttribute("style","color: var(--text-muted)"),r.appendChild(o),r.appendChild(a),r.appendChild(xe("https://github.com/cumany#thank-you-very-much-for-your-support"))}},xe=n=>{let e=createEl("a");return e.setAttribute("href",n),e.addClass("buymeacoffee-img"),e.innerHTML='<img src="https://img.buymeacoffee.com/button-api/?text=Buy me a coffee &emoji=&slug=Cuman&button_colour=BD5FFF&font_colour=ffffff&font_family=Poppins&outline_colour=000000&coffee_colour=FFDD00" />',e};var y,x=0;function F(){(0,p.requireApiVersion)("0.15.0")?y=activeWindow.document:y=window.document,y.querySelectorAll(".floating-toc-div").forEach(e=>{e&&e.remove()})}function he(n){var s;(0,p.requireApiVersion)("0.15.0")?y=activeWindow.document:y=window.document;let e=(s=n.contentEl)==null?void 0:s.querySelector(".floating-toc-div");if(e){let r=e.querySelector("ul.floating-toc");r||(r=e.createEl("ul"),r.addClass("floating-toc"));let a=e==null?void 0:e.querySelectorAll("li.heading-list-item"),o=globalThis.headingdata;return o?(a.length>=o.length?a==null||a.forEach((t,i)=>{var l;if(o[i]){if(o[i].level==t.getAttribute("data-level")&&o[i].heading==t.children[0].innerText&&o[i].position.start.line==t.getAttribute("data-line"))return;t.setAttribute("data-level",o[i].level.toString()),t.setAttribute("data-id",i.toString()),t.setAttribute("data-line",o[i].position.start.line.toString()),(l=t.children[0].querySelector("a"))==null||l.remove(),O(n,o[i].heading,t.children[0],n.file.path,null)}else t.remove()}):o==null||o.forEach((t,i)=>{var l;if(i<=a.length-1){if(t.level.toString()==a[i].getAttribute("data-level")&&t.heading==a[i].children[0].innerText&&t.position.start.line.toString()==a[i].getAttribute("data-line"))return;a[i].setAttribute("data-level",t.level.toString()),a[i].setAttribute("data-id",i.toString()),a[i].setAttribute("data-line",t.position.start.line.toString()),(l=a[i].children[0].querySelector("a"))==null||l.remove(),O(n,t.heading,a[i].children[0],n.file.path,null)}else V(n,r,t,i)}),!0):(r.remove(),!1)}else return!1}function fe(n){for(var e=[];n=n.previousElementSibling;)n.nodeType==1&&e.push(n);return e}function Le(n){var s,r,a,o,t,i;let e=n.target;if(((s=e.parentElement)==null?void 0:s.classList.contains("cm-editor"))||((r=e.parentElement)==null?void 0:r.classList.contains("markdown-reading-view"))){let l=app.workspace.getActiveViewOfType(p.MarkdownView),d,C={};if(l){d=(a=l.currentMode.getScroll())!=null?a:0;let u=globalThis.headingdata,g=(o=u==null?void 0:u.length)!=null?o:0,c=l.contentEl.querySelector(".floating-toc");if(c){let T=parseInt((t=c.querySelector("li.heading-list-item"))==null?void 0:t.getAttribute("data-line")),h=parseInt((i=c.lastElementChild)==null?void 0:i.getAttribute("data-line"));if(d<=0){let v=c.querySelector(".heading-list-item.located");v&&v.removeClass("located");let m=c==null?void 0:c.querySelector(`li[data-line='${T}']`);m&&m.addClass("located");let S=parseInt(m.getAttribute("data-level"));S=S>1?S-1:1;let I=fe(m),L=c==null?void 0:c.querySelector("li.focus");L&&L.removeClass("focus"),I.some(B=>{if(B.dataset.level<=S.toString())return B.addClass("focus"),!0});let A=c.querySelector(".heading-list-item");setTimeout(()=>A.scrollIntoViewIfNeeded(),300)}else{for(;--g>=0;)if(u[g].position.start.line<=d){C=u[g],x=u[g].position.start.line;break}if(!C)return;let v=c.querySelector(".heading-list-item.located");v&&v.removeClass("located"),!x&&c&&(x=T);let m=c==null?void 0:c.querySelector(`li[data-line='${x}']`);if(m){if(x==h||x==T)m.addClass("located");else if(m.nextElementSibling){m.nextElementSibling.addClass("located");let S=parseInt(m.nextElementSibling.getAttribute("data-level"));S=S>1?S-1:1;let I=fe(m.nextElementSibling),L=c==null?void 0:c.querySelector("li.focus");L&&L.removeClass("focus"),I.some(A=>{if(A.dataset.level<=S.toString())return A.addClass("focus"),!0})}m.scrollIntoViewIfNeeded()}}}}}}var q=(0,p.debounce)(Le,200),P=class extends p.Plugin{onload(){return w(this,null,function*(){(0,p.requireApiVersion)("0.15.0")?y=activeWindow.document:y=window.document,yield this.loadSettings();let e=o=>{o&&(he(o)||H(app,this))},s=this.settings.isLoadOnMobile;if(p.Platform.isMobileApp&&s){console.log("floating toc disable loading on mobile");return}this.addCommand({id:"pin-toc-panel",name:"Pinning the Floating TOC panel",icon:"pin",callback:()=>w(this,null,function*(){let o=this.app.workspace.getActiveViewOfType(p.MarkdownView);if(o){let t=o.contentEl.querySelector(".floating-toc-div");t&&(t.classList.contains("pin")?t.removeClass("pin"):t.addClass("pin"))}})}),this.registerEvent(this.app.workspace.on("active-leaf-change",()=>{let o=this.app.workspace.getActiveViewOfType(p.MarkdownView);if(o){let t=this.app.workspace.getActiveFile(),i=this.app.metadataCache.getFileCache(t).headings,l=[];i==null||i.map(d=>{d.heading=d.heading.replace(/<\/?[\s\S]*?(?:".*")*>/g,""),l.push(d)}),globalThis.headingdata=l,this.settings.ignoreTopHeader&&(globalThis.headingdata=i.slice(1)),a(o)}})),this.registerEvent(this.app.metadataCache.on("changed",()=>{var t;let o=this.app.workspace.getActiveViewOfType(p.MarkdownView);if(o){let i=o.file,l=this.app.metadataCache.getFileCache(i).headings,d=[];l==null||l.map(g=>{g.heading=g.heading.replace(/<\/?[\s\S]*?(?:".*")*>/g,""),d.push(g)});let C=d==null?void 0:d.map(g=>g.level+g.heading+g.position.start.line),u=(t=globalThis.headingdata)==null?void 0:t.map(g=>g.level+g.heading+g.position.start.line);if(JSON.stringify(u)==JSON.stringify(C))return;globalThis.headingdata=d,this.settings.ignoreTopHeader&&(globalThis.headingdata=d.slice(1)),a(o)}}));let r=o=>{e(o)},a=o=>(0,p.debounce)(r(o),300,!0);y.addEventListener("scroll",q,!0),this.addSettingTab(new _(this.app,this)),e(this.app.workspace.getActiveViewOfType(p.MarkdownView)),(0,p.requireApiVersion)("0.15.0")&&this.app.workspace.on("window-open",o=>{o.doc.addEventListener("scroll",q,!0)}),app.workspace.onLayoutReady(()=>{app.workspace.trigger("parse-style-settings")})})}onunload(){(0,p.requireApiVersion)("0.15.0")?y=activeWindow.document:y=window.document,y.removeEventListener("scroll",q,!0),F()}loadSettings(){return w(this,null,function*(){this.settings=Object.assign({},R,yield this.loadData())})}saveSettings(){return w(this,null,function*(){yield this.saveData(this.settings)})}};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL21haW4udHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvZmxvYXRpbmd0b2NVSS50cyIsICIuLi9zcmMvc2V0dGluZ3Mvc2V0dGluZ3NUYWIudHMiLCAiLi4vc3JjL3NldHRpbmdzL3NldHRpbmdzRGF0YS50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2hlbHBlci50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9hci50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9jei50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9kYS50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9kZS50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9lbi50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9lbi1nYi50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9lcy50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9mci50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9oaS50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9pZC50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9pdC50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9qYS50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9rby50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9ubC50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9uby50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9wbC50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9wdC50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9wdC1ici50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9yby50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS9ydS50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS90ci50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS96aC1jbi50cyIsICIuLi9zcmMvdHJhbnNsYXRpb25zL2xvY2FsZS96aC10dy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgZGVib3VuY2UsIFBsYXRmb3JtLCByZXF1aXJlQXBpVmVyc2lvbiwgTWFya2Rvd25WaWV3LCBQbHVnaW4sIEhlYWRpbmdDYWNoZSwgQXBwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IGNyZWF0VG9jLCBjcmVhdGVMaSwgcmVuZGVySGVhZGVyIH0gZnJvbSBcInNyYy9jb21wb25lbnRzL2Zsb2F0aW5ndG9jVUlcIlxyXG5pbXBvcnQgeyBGbG90aW5nVE9DU2V0dGluZ1RhYiB9IGZyb20gXCJzcmMvc2V0dGluZ3Mvc2V0dGluZ3NUYWJcIjtcclxuaW1wb3J0IHsgRmxvdGluZ1RPQ1NldHRpbmcsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tIFwic3JjL3NldHRpbmdzL3NldHRpbmdzRGF0YVwiO1xyXG5cclxuXHJcbmxldCBhY3RpdmVEb2N1bWVudDogRG9jdW1lbnQ7XHJcbmxldCBsaW5lID0gMDtcclxuZXhwb3J0IGZ1bmN0aW9uIHNlbGZEZXN0cnVjdCgpIHtcclxuXHRyZXF1aXJlQXBpVmVyc2lvbihcIjAuMTUuMFwiKSA/IGFjdGl2ZURvY3VtZW50ID0gYWN0aXZlV2luZG93LmRvY3VtZW50IDogYWN0aXZlRG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7XHJcblx0bGV0IGZsb2F0X3RvY19kb20gPSBhY3RpdmVEb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG5cdFx0XCIuZmxvYXRpbmctdG9jLWRpdlwiXHJcblx0KTtcclxuXHRmbG9hdF90b2NfZG9tLmZvckVhY2goZWxlbWVudCA9PiB7XHJcblx0XHRpZiAoZWxlbWVudCkge1xyXG5cdFx0XHRlbGVtZW50LnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWZyZXNoX25vZGUodmlldzogTWFya2Rvd25WaWV3KSB7XHJcblx0cmVxdWlyZUFwaVZlcnNpb24oXCIwLjE1LjBcIikgPyBhY3RpdmVEb2N1bWVudCA9IGFjdGl2ZVdpbmRvdy5kb2N1bWVudCA6IGFjdGl2ZURvY3VtZW50ID0gd2luZG93LmRvY3VtZW50O1xyXG5cdC8vbGV0IGN1cnJlbnRsZWFmID0gYWN0aXZlRG9jdW1lbnQ/LnF1ZXJ5U2VsZWN0b3IoXCIud29ya3NwYWNlLWxlYWYubW9kLWFjdGl2ZVwiKTtcclxuXHQvL2xldCB2aWV3PXBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KVxyXG5cdGxldCBmbG9hdF90b2NfZG9tID0gdmlldy5jb250ZW50RWw/LnF1ZXJ5U2VsZWN0b3IoXCIuZmxvYXRpbmctdG9jLWRpdlwiKTtcclxuXHQvL2NvbnNvbGUubG9nKGZsb2F0X3RvY19kb20sXCJmbG9hdF90b2NfZG9tXCIpXHJcblx0aWYgKGZsb2F0X3RvY19kb20pIHtcclxuXHRcdGxldCB1bF9kb20gPSBmbG9hdF90b2NfZG9tLnF1ZXJ5U2VsZWN0b3IoXCJ1bC5mbG9hdGluZy10b2NcIikgYXMgSFRNTEVsZW1lbnRcclxuXHRcdGlmICghdWxfZG9tKVxyXG5cdFx0XHR1bF9kb20gPSBmbG9hdF90b2NfZG9tLmNyZWF0ZUVsKFwidWxcIiksIHVsX2RvbS5hZGRDbGFzcyhcImZsb2F0aW5nLXRvY1wiKVxyXG5cdFx0bGV0IGxpX2RvbSA9IGZsb2F0X3RvY19kb20/LnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaS5oZWFkaW5nLWxpc3QtaXRlbVwiKVxyXG5cdFx0bGV0IGhlYWRpbmdkYXRhID0gZ2xvYmFsVGhpcy5oZWFkaW5nZGF0YVxyXG5cdFx0Ly9jb25zb2xlLmxvZyhoZWFkaW5nZGF0YSxcImhlYWRpbmdkYXRhXCIpXHJcblx0XHRpZiAoaGVhZGluZ2RhdGEpIHtcclxuXHRcdFx0Ly9cdGNvbnNvbGUubG9nKFwicmVmcmVzaF9ub2RlXCIpXHJcblx0XHRcdGlmIChsaV9kb20ubGVuZ3RoID49IGhlYWRpbmdkYXRhLmxlbmd0aCkge1xyXG5cdFx0XHRcdGxpX2RvbT8uZm9yRWFjaCgoZWwsIGkpID0+IHtcclxuXHRcdFx0XHRcdGlmIChoZWFkaW5nZGF0YVtpXSkge1xyXG5cdFx0XHRcdFx0XHRpZiAoKGhlYWRpbmdkYXRhW2ldLmxldmVsID09IGVsLmdldEF0dHJpYnV0ZShcImRhdGEtbGV2ZWxcIikpXHJcblx0XHRcdFx0XHRcdFx0JiYgKGhlYWRpbmdkYXRhW2ldLmhlYWRpbmcgPT0gKGVsLmNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50KS5pbm5lclRleHQpXHJcblx0XHRcdFx0XHRcdFx0JiYgKGhlYWRpbmdkYXRhW2ldLnBvc2l0aW9uLnN0YXJ0LmxpbmUgPT0gZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1saW5lXCIpKSkgLy9cdTdFQTdcdTUyMkJcdUZGMENcdTUxODVcdTVCQjlcdTg4NENcdTUzRjdcdTVCOENcdTUxNjhcdTRFMDBcdTgxRjRcdTVDMzFcdTRFMERcdTk3MDBcdTg5ODFcdTY2RjRcdTY1QjBcdTMwMDJcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm5cclxuXHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0ZWwuc2V0QXR0cmlidXRlKFwiZGF0YS1sZXZlbFwiLCBoZWFkaW5nZGF0YVtpXS5sZXZlbC50b1N0cmluZygpKTtcclxuXHRcdFx0XHRcdFx0XHRlbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIGkudG9TdHJpbmcoKSk7XHJcblx0XHRcdFx0XHRcdFx0ZWwuc2V0QXR0cmlidXRlKFwiZGF0YS1saW5lXCIsIGhlYWRpbmdkYXRhW2ldLnBvc2l0aW9uLnN0YXJ0LmxpbmUudG9TdHJpbmcoKSk7XHJcblx0XHRcdFx0XHRcdFx0ZWwuY2hpbGRyZW5bMF0ucXVlcnlTZWxlY3RvcihcImFcIik/LnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0XHRcdHJlbmRlckhlYWRlcih2aWV3LCBoZWFkaW5nZGF0YVtpXS5oZWFkaW5nLCBlbC5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudCwgdmlldy5maWxlLnBhdGgsIG51bGwpXHJcblx0XHRcdFx0XHRcdFx0Ly8oZWwuY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnQpLmlubmVySFRNTCA9ICc8YSBjbGFzcz1cInRleHRcIj4nICsgaGVhZGluZ2RhdGFbaV0uaGVhZGluZyArICc8L2E+J1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRlbC5yZW1vdmUoKVxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aGVhZGluZ2RhdGE/LmZvckVhY2goKGVsOiBIZWFkaW5nQ2FjaGUsIGk6IG51bWJlcikgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKGkgPD0gKGxpX2RvbS5sZW5ndGggLSAxKSkge1xyXG5cdFx0XHRcdFx0XHRpZiAoKGVsLmxldmVsLnRvU3RyaW5nKCkgPT0gbGlfZG9tW2ldLmdldEF0dHJpYnV0ZShcImRhdGEtbGV2ZWxcIikpXHJcblx0XHRcdFx0XHRcdFx0JiYgKGVsLmhlYWRpbmcgPT0gKGxpX2RvbVtpXS5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudCkuaW5uZXJUZXh0KVxyXG5cdFx0XHRcdFx0XHRcdCYmIChlbC5wb3NpdGlvbi5zdGFydC5saW5lLnRvU3RyaW5nKCkgPT0gbGlfZG9tW2ldLmdldEF0dHJpYnV0ZShcImRhdGEtbGluZVwiKSkpIC8vXHU3RUE3XHU1MjJCXHVGRjBDXHU1MTg1XHU1QkI5XHU4ODRDXHU1M0Y3XHU1QjhDXHU1MTY4XHU0RTAwXHU4MUY0XHU1QzMxXHU0RTBEXHU5NzAwXHU4OTgxXHU2NkY0XHU2NUIwXHUzMDAyXHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuXHJcblx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGxpX2RvbVtpXS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWxldmVsXCIsIGVsLmxldmVsLnRvU3RyaW5nKCkpO1xyXG5cdFx0XHRcdFx0XHRcdGxpX2RvbVtpXS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIGkudG9TdHJpbmcoKSk7XHJcblx0XHRcdFx0XHRcdFx0bGlfZG9tW2ldLnNldEF0dHJpYnV0ZShcImRhdGEtbGluZVwiLCBlbC5wb3NpdGlvbi5zdGFydC5saW5lLnRvU3RyaW5nKCkpO1xyXG5cdFx0XHRcdFx0XHRcdC8vKGxpX2RvbVtpXS5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudCkuaW5uZXJIVE1MID0gJzxhIGNsYXNzPVwidGV4dFwiPicgKyBlbC5oZWFkaW5nICsgJzwvYT4nXHJcblx0XHRcdFx0XHRcdFx0bGlfZG9tW2ldLmNoaWxkcmVuWzBdLnF1ZXJ5U2VsZWN0b3IoXCJhXCIpPy5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdFx0XHRyZW5kZXJIZWFkZXIodmlldywgZWwuaGVhZGluZywgbGlfZG9tW2ldLmNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50LCB2aWV3LmZpbGUucGF0aCwgbnVsbClcclxuXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdFx0XHRjcmVhdGVMaSh2aWV3LCB1bF9kb20sIGVsLCBpKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dWxfZG9tLnJlbW92ZSgpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdH0gZWxzZVxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cclxufVxyXG5mdW5jdGlvbiBzaWJsaW5nRWxlbXMoZWxlbTogRWxlbWVudCkge1xyXG5cdHZhciBub2RlcyA9IFtdO1xyXG5cdHdoaWxlICgoZWxlbSA9IGVsZW0ucHJldmlvdXNFbGVtZW50U2libGluZykpIHtcclxuXHRcdGlmIChlbGVtLm5vZGVUeXBlID09IDEpIHtcclxuXHRcdFx0bm9kZXMucHVzaChlbGVtKTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIG5vZGVzO1xyXG59XHJcbmZ1bmN0aW9uIF9oYW5kbGVTY3JvbGwoZXZ0OiBFdmVudCkge1xyXG5cdGxldCB0YXJnZXQgPSBldnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50XHJcblx0aWYgKHRhcmdldC5wYXJlbnRFbGVtZW50Py5jbGFzc0xpc3QuY29udGFpbnMoXCJjbS1lZGl0b3JcIikgfHwgdGFyZ2V0LnBhcmVudEVsZW1lbnQ/LmNsYXNzTGlzdC5jb250YWlucyhcIm1hcmtkb3duLXJlYWRpbmctdmlld1wiKSkge1xyXG5cdFx0Y29uc3QgdmlldyA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpXHJcblx0XHRsZXQgY3VycmVudF9saW5lXHJcblx0XHRsZXQgY3VycmVudF9oZWFkaW5nID0ge307XHJcblx0XHRpZiAodmlldykge1xyXG5cdFx0XHRjdXJyZW50X2xpbmUgPSB2aWV3LmN1cnJlbnRNb2RlLmdldFNjcm9sbCgpID8/IDBcclxuXHRcdFx0LyogXHRsZXQgZmxvYXRfdG9jX2RvbSA9IHZpZXcuY29udGVudEVsPy5xdWVyeVNlbGVjdG9yKFwiLmZsb2F0aW5nLXRvYy1kaXZcIik7XHJcblx0XHRcdFx0bGV0IGxpX2RvbSA9IGZsb2F0X3RvY19kb20/LnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaS5oZWFkaW5nLWxpc3QtaXRlbVwiKVxyXG5cdFx0XHRcdGxldCBoZWFkbGluZSA9IFtdO1xyXG5cdFx0XHRcdGxpX2RvbT8uZm9yRWFjaCgoZWwsIGkpID0+IHtcclxuXHRcdFx0XHRcdGhlYWRsaW5lLnB1c2gobGlfZG9tW2ldLmdldEF0dHJpYnV0ZShcImRhdGEtbGluZVwiKSlcclxuXHRcdFx0XHR9KSAqL1xyXG5cclxuXHRcdFx0Ly9cdGNvbnNvbGUubG9nKGN1cnJlbnRfbGluZSwgXCJjdXJyZW50X2xpbmVcIilcclxuXHRcdFx0bGV0IGhlYWRpbmdzID0gZ2xvYmFsVGhpcy5oZWFkaW5nZGF0YVxyXG5cdFx0XHRsZXQgaSA9IGhlYWRpbmdzPy5sZW5ndGggPz8gMFxyXG5cdFx0XHRsZXQgZmxvYXR0b2MgPSB2aWV3LmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFwiLmZsb2F0aW5nLXRvY1wiKVxyXG5cdFx0XHRpZiAoZmxvYXR0b2MpIHtcclxuXHRcdFx0XHRsZXQgZmlyc3RsaW5lID0gcGFyc2VJbnQoZmxvYXR0b2MucXVlcnlTZWxlY3RvcihcImxpLmhlYWRpbmctbGlzdC1pdGVtXCIpPy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWxpbmVcIikpXHJcblx0XHRcdFx0bGV0IGxhc3RsaW5lID0gcGFyc2VJbnQoZmxvYXR0b2MubGFzdEVsZW1lbnRDaGlsZD8uZ2V0QXR0cmlidXRlKFwiZGF0YS1saW5lXCIpKVxyXG5cdFx0XHRcdC8vXHU2RURBXHU1MkE4XHU1MjMwXHU5ODc2XHU5MEU4XHVGRjBDXHU2MzA3XHU3OTNBXHU1NjY4XHU1QjlBXHU0RjREXHU1MjMwXHU5ODc2XHU5MEU4XHJcblx0XHRcdFx0aWYgKGN1cnJlbnRfbGluZSA8PSAwKSB7XHJcblx0XHRcdFx0XHRsZXQgcHJldkxvY2F0aW9uID0gZmxvYXR0b2MucXVlcnlTZWxlY3RvcihcIi5oZWFkaW5nLWxpc3QtaXRlbS5sb2NhdGVkXCIpXHJcblx0XHRcdFx0XHRpZiAocHJldkxvY2F0aW9uKSB7XHJcblx0XHRcdFx0XHRcdHByZXZMb2NhdGlvbi5yZW1vdmVDbGFzcyhcImxvY2F0ZWRcIilcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRsZXQgY3VyTG9jYXRpb24gPSBmbG9hdHRvYz8ucXVlcnlTZWxlY3RvcihgbGlbZGF0YS1saW5lPScke2ZpcnN0bGluZX0nXWApXHJcblx0XHRcdFx0XHRpZiAoY3VyTG9jYXRpb24pIGN1ckxvY2F0aW9uLmFkZENsYXNzKFwibG9jYXRlZFwiKTtcclxuXHJcblxyXG5cdFx0XHRcdFx0bGV0IGxldmVsID0gcGFyc2VJbnQoY3VyTG9jYXRpb24uZ2V0QXR0cmlidXRlKFwiZGF0YS1sZXZlbFwiKSlcclxuXHRcdFx0XHRcdGxldmVsID0gbGV2ZWwgPiAxID8gbGV2ZWwgLSAxIDogMTtcclxuXHRcdFx0XHRcdGxldCBzaWJsaW5ncyA9IHNpYmxpbmdFbGVtcyhjdXJMb2NhdGlvbik7XHJcblx0XHRcdFx0XHRsZXQgZm9jdXNlbGUgPSBmbG9hdHRvYz8ucXVlcnlTZWxlY3RvcihgbGkuZm9jdXNgKVxyXG5cdFx0XHRcdFx0aWYgKGZvY3VzZWxlKSB7XHJcblx0XHRcdFx0XHRcdGZvY3VzZWxlLnJlbW92ZUNsYXNzKFwiZm9jdXNcIilcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHNpYmxpbmdzLnNvbWUoZWxlbWVudCA9PiB7XHJcblx0XHRcdFx0XHRcdGlmICgoZWxlbWVudCBhcyBIVE1MSW5wdXRFbGVtZW50KS5kYXRhc2V0WydsZXZlbCddIDw9IGxldmVsLnRvU3RyaW5nKCkpIFxyXG5cdFx0XHRcdFx0XHR7IGVsZW1lbnQuYWRkQ2xhc3MoJ2ZvY3VzJyk7IHJldHVybiB0cnVlfVxyXG5cdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRsZXQgTG9jYXRpb24gPSBmbG9hdHRvYy5xdWVyeVNlbGVjdG9yKFwiLmhlYWRpbmctbGlzdC1pdGVtXCIpXHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IExvY2F0aW9uLnNjcm9sbEludG9WaWV3SWZOZWVkZWQoKSwgMzAwKVxyXG5cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHR3aGlsZSAoLS1pID49IDApIHtcclxuXHRcdFx0XHRcdFx0aWYgKGhlYWRpbmdzW2ldLnBvc2l0aW9uLnN0YXJ0LmxpbmUgPD0gY3VycmVudF9saW5lKSB7XHJcblx0XHRcdFx0XHRcdFx0Y3VycmVudF9oZWFkaW5nID0gaGVhZGluZ3NbaV1cclxuXHRcdFx0XHRcdFx0XHQvL1x0Y29uc29sZS5sb2coY3VycmVudF9oZWFkaW5nKVxyXG5cdFx0XHRcdFx0XHRcdGxpbmUgPSBoZWFkaW5nc1tpXS5wb3NpdGlvbi5zdGFydC5saW5lXHJcblx0XHRcdFx0XHRcdFx0YnJlYWtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKCFjdXJyZW50X2hlYWRpbmcpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuXHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly9sZXQgY29udGFpbmVyID0gYWN0aXZlRG9jdW1lbnQ/LnF1ZXJ5U2VsZWN0b3IoXCIud29ya3NwYWNlLWxlYWYubW9kLWFjdGl2ZVwiKTtcclxuXHJcblx0XHRcdFx0XHRsZXQgcHJldkxvY2F0aW9uID0gZmxvYXR0b2MucXVlcnlTZWxlY3RvcihcIi5oZWFkaW5nLWxpc3QtaXRlbS5sb2NhdGVkXCIpXHJcblx0XHRcdFx0XHRpZiAocHJldkxvY2F0aW9uKSB7XHJcblx0XHRcdFx0XHRcdHByZXZMb2NhdGlvbi5yZW1vdmVDbGFzcyhcImxvY2F0ZWRcIilcclxuXHRcdFx0XHRcdH1cclxuXHJcblxyXG5cdFx0XHRcdFx0aWYgKCFsaW5lICYmIGZsb2F0dG9jKSBsaW5lID0gZmlyc3RsaW5lXHJcblx0XHRcdFx0XHQvL1x0Y29uc29sZS5sb2cobGluZSlcclxuXHRcdFx0XHRcdGxldCBjdXJMb2NhdGlvbiA9IGZsb2F0dG9jPy5xdWVyeVNlbGVjdG9yKGBsaVtkYXRhLWxpbmU9JyR7bGluZX0nXWApXHJcblxyXG5cdFx0XHRcdFx0aWYgKGN1ckxvY2F0aW9uKSB7XHJcblx0XHRcdFx0XHRcdGlmIChsaW5lID09IGxhc3RsaW5lIHx8IGxpbmUgPT0gZmlyc3RsaW5lKSB7XHJcblx0XHRcdFx0XHRcdFx0Y3VyTG9jYXRpb24uYWRkQ2xhc3MoXCJsb2NhdGVkXCIpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2VcclxuXHRcdFx0XHRcdFx0XHRpZiAoY3VyTG9jYXRpb24ubmV4dEVsZW1lbnRTaWJsaW5nKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjdXJMb2NhdGlvbi5uZXh0RWxlbWVudFNpYmxpbmcuYWRkQ2xhc3MoXCJsb2NhdGVkXCIpO1xyXG5cdFx0XHRcdFx0XHRcdFx0bGV0IGxldmVsID0gcGFyc2VJbnQoY3VyTG9jYXRpb24ubmV4dEVsZW1lbnRTaWJsaW5nLmdldEF0dHJpYnV0ZShcImRhdGEtbGV2ZWxcIikpXHJcblx0XHRcdFx0XHRcdFx0XHRsZXZlbCA9IGxldmVsID4gMSA/IGxldmVsIC0gMSA6IDE7XHJcblx0XHRcdFx0XHRcdFx0XHRsZXQgc2libGluZ3MgPSBzaWJsaW5nRWxlbXMoY3VyTG9jYXRpb24ubmV4dEVsZW1lbnRTaWJsaW5nKTtcclxuXHRcdFx0XHRcdFx0XHRcdGxldCBmb2N1c2VsZSA9IGZsb2F0dG9jPy5xdWVyeVNlbGVjdG9yKGBsaS5mb2N1c2ApXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoZm9jdXNlbGUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Zm9jdXNlbGUucmVtb3ZlQ2xhc3MoXCJmb2N1c1wiKVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0c2libGluZ3Muc29tZShlbGVtZW50ID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKChlbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmRhdGFzZXRbJ2xldmVsJ10gPD0gbGV2ZWwudG9TdHJpbmcoKSkgXHJcblx0XHRcdFx0XHRcdFx0XHRcdHsgZWxlbWVudC5hZGRDbGFzcygnZm9jdXMnKTsgcmV0dXJuIHRydWV9XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHQvL2N1ckxvY2F0aW9uLnNjcm9sbEludG9WaWV3KHsgYmxvY2s6IFwiY2VudGVyXCIgfSlcclxuXHRcdFx0XHRcdFx0Y3VyTG9jYXRpb24uc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5jb25zdCBoYW5kbGVTY3JvbGwgPSBkZWJvdW5jZShfaGFuZGxlU2Nyb2xsLCAyMDApXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZsb2F0aW5nVG9jIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5nczogYW55O1xyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdHJlcXVpcmVBcGlWZXJzaW9uKFwiMC4xNS4wXCIpID8gYWN0aXZlRG9jdW1lbnQgPSBhY3RpdmVXaW5kb3cuZG9jdW1lbnQgOiBhY3RpdmVEb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudDtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblx0XHRjb25zdCB1cGRhdGVIZWFkaW5nc0ZvclZpZXcgPSAodmlldzogTWFya2Rvd25WaWV3KSA9PiB7XHJcblx0XHRcdHZpZXcgPyByZWZyZXNoX25vZGUodmlldykgPyBmYWxzZSA6IGNyZWF0VG9jKGFwcCwgdGhpcykgOiBmYWxzZVxyXG5cclxuXHRcdH07XHJcblx0XHRsZXQgaXNMb2FkT25Nb2JpbGUgPSB0aGlzLnNldHRpbmdzLmlzTG9hZE9uTW9iaWxlXHJcblx0XHRpZiAoUGxhdGZvcm0uaXNNb2JpbGVBcHAgJiYgaXNMb2FkT25Nb2JpbGUpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coYGZsb2F0aW5nIHRvYyBkaXNhYmxlIGxvYWRpbmcgb24gbW9iaWxlYCk7XHJcblx0XHRcdHJldHVybjtcclxuXHJcblx0XHR9XHJcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xyXG5cdFx0XHRpZDogXCJwaW4tdG9jLXBhbmVsXCIsXHJcblx0XHRcdG5hbWU6IFwiUGlubmluZyB0aGUgRmxvYXRpbmcgVE9DIHBhbmVsXCIsXHJcblx0XHRcdGljb246IFwicGluXCIsXHJcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0bGV0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpXHJcblx0XHRcdFx0aWYgKHZpZXcpIHtcclxuXHRcdFx0XHRcdGxldCBmbG9hdGluZ1RvY1dyYXBwZXIgPSB2aWV3LmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFwiLmZsb2F0aW5nLXRvYy1kaXZcIilcclxuXHRcdFx0XHRcdGlmIChmbG9hdGluZ1RvY1dyYXBwZXIpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGZsb2F0aW5nVG9jV3JhcHBlci5jbGFzc0xpc3QuY29udGFpbnMoXCJwaW5cIikpXHJcblx0XHRcdFx0XHRcdFx0ZmxvYXRpbmdUb2NXcmFwcGVyLnJlbW92ZUNsYXNzKFwicGluXCIpXHJcblx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRmbG9hdGluZ1RvY1dyYXBwZXIuYWRkQ2xhc3MoXCJwaW5cIik7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oXCJhY3RpdmUtbGVhZi1jaGFuZ2VcIiwgKCkgPT4ge1xyXG5cdFx0XHRcdGxldCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KVxyXG5cdFx0XHRcdGlmICh2aWV3KSB7XHJcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50X2ZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpXHJcblx0XHRcdFx0XHRsZXQgaGVhZGluZyA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGN1cnJlbnRfZmlsZSkuaGVhZGluZ3NcclxuXHRcdFx0XHRcdGxldCBjbGVhbmhlYWRpbmc6IEhlYWRpbmdDYWNoZVtdPVtdXHJcblx0XHRcdFx0XHRoZWFkaW5nPy5tYXAoKGl0ZW06IEhlYWRpbmdDYWNoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpdGVtLmhlYWRpbmc9aXRlbS5oZWFkaW5nLnJlcGxhY2UoLzxcXC8/W1xcc1xcU10qPyg/OlwiLipcIikqPi9nLFwiXCIpOyAvLyBjbGVhbiBodG1sIHRhZ3NcclxuXHRcdFx0XHRcdFx0Y2xlYW5oZWFkaW5nLnB1c2goaXRlbSlcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHRnbG9iYWxUaGlzLmhlYWRpbmdkYXRhID0gY2xlYW5oZWFkaW5nO1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuaWdub3JlVG9wSGVhZGVyKVxyXG5cdFx0XHRcdFx0XHRnbG9iYWxUaGlzLmhlYWRpbmdkYXRhID0gaGVhZGluZy5zbGljZSgxKTtcclxuXHRcdFx0XHRcdC8vXHRcdGNvbnNvbGUubG9nKFwicmVmcmVzaFwiKVxyXG5cdFx0XHRcdFx0cmVmcmVzaCh2aWV3KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0KVxyXG5cdFx0KTtcclxuXHRcdC8qIFx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1vcGVuXCIsIChmaWxlKSA9PiB7XHJcblx0XHRcdFx0XHRsZXQgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldylcclxuXHRcdFx0XHRcdGlmICh2aWV3KSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRfZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKClcclxuXHRcdFx0XHRcdFx0bGV0IGhlYWRpbmcgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShjdXJyZW50X2ZpbGUpLmhlYWRpbmdzXHJcblx0XHRcdFx0XHRcdGdsb2JhbFRoaXMuaGVhZGluZ2RhdGEgPSBoZWFkaW5nXHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwicmVmcmVzaFwiKVxyXG5cdFx0XHRcdFx0XHRyZWZyZXNoKHZpZXcpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQpXHJcblx0XHRcdFx0KTsgKi9cclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLm9uKCdjaGFuZ2VkJywgKCkgPT4ge1xyXG5cdFx0XHRsZXQgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldylcclxuXHRcdFx0aWYgKHZpZXcpIHtcclxuXHRcdFx0XHRjb25zdCBjdXJyZW50X2ZpbGUgPSB2aWV3LmZpbGVcclxuXHJcblx0XHRcdFx0bGV0IGhlYWRpbmcgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShjdXJyZW50X2ZpbGUpLmhlYWRpbmdzXHJcblx0XHRcdFx0bGV0IGNsZWFuaGVhZGluZzogSGVhZGluZ0NhY2hlW109W11cclxuXHRcdFx0XHRoZWFkaW5nPy5tYXAoKGl0ZW06IEhlYWRpbmdDYWNoZSkgPT4ge1xyXG5cdFx0XHRcdFx0aXRlbS5oZWFkaW5nPWl0ZW0uaGVhZGluZy5yZXBsYWNlKC88XFwvP1tcXHNcXFNdKj8oPzpcIi4qXCIpKj4vZyxcIlwiKTsgLy8gY2xlYW4gaHRtbCB0YWdzXHJcblx0XHRcdFx0XHRjbGVhbmhlYWRpbmcucHVzaChpdGVtKVxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0bGV0IG5ld2hlYWRpbmcgPSBjbGVhbmhlYWRpbmc/Lm1hcChpdGVtID0+IHtcclxuXHRcdFx0XHRcdHJldHVybiBpdGVtLmxldmVsICsgaXRlbS5oZWFkaW5nICsgaXRlbS5wb3NpdGlvbi5zdGFydC5saW5lXHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHRsZXQgbmV3aGVhZGluZ2RhdGEgPSBnbG9iYWxUaGlzLmhlYWRpbmdkYXRhPy5tYXAoKGl0ZW06IEhlYWRpbmdDYWNoZSkgPT4ge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGl0ZW0ubGV2ZWwgKyBpdGVtLmhlYWRpbmcgKyBpdGVtLnBvc2l0aW9uLnN0YXJ0LmxpbmVcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdGlmIChKU09OLnN0cmluZ2lmeShuZXdoZWFkaW5nZGF0YSkgPT0gSlNPTi5zdHJpbmdpZnkobmV3aGVhZGluZykpXHJcblx0XHRcdFx0XHRyZXR1cm4gIC8vXHU2ODA3XHU5ODk4XHU3RUQzXHU2Nzg0XHU4ODRDXHU1M0Y3XHU2Q0ExXHU2NzA5XHU1M0Q4XHU1MzE2XHU0RTBEXHU2NkY0XHU2NUIwXHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHQvL1x0Y29uc29sZS5sb2coXCJyZWZyZXNoXCIpXHJcblx0XHRcdFx0XHJcblx0XHRcdFx0XHRnbG9iYWxUaGlzLmhlYWRpbmdkYXRhID0gY2xlYW5oZWFkaW5nO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5pZ25vcmVUb3BIZWFkZXIpXHJcblx0XHRcdFx0XHRcdGdsb2JhbFRoaXMuaGVhZGluZ2RhdGEgPSBjbGVhbmhlYWRpbmcuc2xpY2UoMSk7XHJcblx0XHRcdFx0XHRyZWZyZXNoKHZpZXcpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0fSkpXHJcblxyXG5cdFx0Y29uc3QgcmVmcmVzaF9vdXRsaW5lID0gKHZpZXc6IE1hcmtkb3duVmlldyk6IGFueSA9PiB7XHJcblx0XHRcdHVwZGF0ZUhlYWRpbmdzRm9yVmlldyh2aWV3KVxyXG5cdFx0fVxyXG5cdFx0Y29uc3QgcmVmcmVzaCA9ICh2aWV3OiBNYXJrZG93blZpZXcpID0+IGRlYm91bmNlKHJlZnJlc2hfb3V0bGluZSh2aWV3KSwgMzAwLCB0cnVlKVxyXG5cdFx0LyogXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImVkaXRvci1jaGFuZ2VcIiwgKGVkaXRvcikgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBhY3RpdmVWaWV3ID1cclxuXHRcdFx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0XHRcdFx0XHRpZiAoYWN0aXZlVmlldykge1xyXG5cdFx0XHRcdFx0XHRcdGxldCByZXNvbHZlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVnaXN0ZXJFdmVudChcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUub24oXCJyZXNvbHZlXCIsIChmaWxlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChhY3RpdmVWaWV3LmZpbGUgPT09IGZpbGUgJiYgIXJlc29sdmVkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHVwZGF0ZUhlYWRpbmdzRm9yVmlldygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0KTsgKi9cclxuXHJcblxyXG5cdFx0YWN0aXZlRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVTY3JvbGwsIHRydWUpXHJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IEZsb3RpbmdUT0NTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG5cdFx0dXBkYXRlSGVhZGluZ3NGb3JWaWV3KHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldykpO1xyXG5cdFx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKFwiMC4xNS4wXCIpKSB7XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignd2luZG93LW9wZW4nLCAobGVhZikgPT4ge1xyXG5cdFx0XHRcdGxlYWYuZG9jLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlU2Nyb2xsLCB0cnVlKVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XHJcblx0XHRcdGFwcC53b3Jrc3BhY2UudHJpZ2dlcihcInBhcnNlLXN0eWxlLXNldHRpbmdzXCIpO1xyXG5cdFx0fSk7XHJcblxyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHRyZXF1aXJlQXBpVmVyc2lvbihcIjAuMTUuMFwiKSA/IGFjdGl2ZURvY3VtZW50ID0gYWN0aXZlV2luZG93LmRvY3VtZW50IDogYWN0aXZlRG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7XHJcblx0XHRhY3RpdmVEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGhhbmRsZVNjcm9sbCwgdHJ1ZSlcclxuXHRcdHNlbGZEZXN0cnVjdCgpO1xyXG5cdH1cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG59XHJcbiIsICJcclxuaW1wb3J0IHR5cGUgRmxvYXRpbmdUb2MgZnJvbSBcInNyYy9tYWluXCI7XHJcbmltcG9ydCB7IEFwcCxOb3RpY2UscmVxdWlyZUFwaVZlcnNpb24sIE1hcmtkb3duVmlldywgQ29tcG9uZW50LCBIZWFkaW5nQ2FjaGUsIE1hcmtkb3duUmVuZGVyZXIsIEJ1dHRvbkNvbXBvbmVudCwgVmlldyB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5kZXJIZWFkZXIoXHJcbiAgICB2aWV3OiBNYXJrZG93blZpZXcsXHJcbiAgICBzb3VyY2U6IHN0cmluZyxcclxuICAgIGNvbnRhaW5lcj86IEhUTUxFbGVtZW50LFxyXG4gICAgbm90ZVBhdGg/OiBzdHJpbmcsXHJcbiAgICBjb21wb25lbnQ6IENvbXBvbmVudCA9IG51bGxcclxuKSB7XHJcbiAgICBjb25zdCByZWdleCA9IC8oPzw9XlxccyopWzAtOV0rXFwuXFxzLzsgLy9cdTY3MDlcdTVFOEZcdTUyMTdcdTg4NjhcclxuICAgIGNvbnN0IHJlZ2V4MiA9IC8oPzw9XlxccyopW1xcLVxcK11cXHMvOyAvL1x1NjVFMFx1NUU4Rlx1NTIxN1x1ODg2OCAgXHJcbiAgICBsZXQgbTtcclxuICAgIGxldCBwcmVsaXN0ID0gJyc7XHJcbiAgICBpZiAoKG0gPSByZWdleC5leGVjKHNvdXJjZSkpICE9PSBudWxsKSB7XHJcbiAgICAgICAgcHJlbGlzdCA9IG1bMF1cclxuICAgICAgICBzb3VyY2UgPSBzb3VyY2UucmVwbGFjZShyZWdleCwgJycpO1xyXG4gICAgfSBlbHNlIGlmICgobSA9IHJlZ2V4Mi5leGVjKHNvdXJjZSkpICE9PSBudWxsKSB7XHJcbiAgICAgICAgcHJlbGlzdCA9IG1bMF1cclxuICAgICAgICBzb3VyY2UgPSBzb3VyY2UucmVwbGFjZShyZWdleDIsICcnKTtcclxuICAgIH1cclxuICAgIGxldCBzdWJjb250YWluZXIgPSBjb250YWluZXJcclxuICAgIGF3YWl0IE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24oXHJcbiAgICAgICAgc291cmNlLFxyXG4gICAgICAgIHN1YmNvbnRhaW5lcixcclxuICAgICAgICBub3RlUGF0aCxcclxuICAgICAgICBjb21wb25lbnRcclxuICAgICk7XHJcbiAgICBsZXQgYXRhZyA9IHN1YmNvbnRhaW5lci5jcmVhdGVFbChcImFcIik7XHJcbiAgICBhdGFnLmFkZENsYXNzKFwidGV4dFwiKVxyXG4gICAgYXRhZy5vbmNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IHN0YXJ0bGluZSA9IHBhcnNlSW50KHN1YmNvbnRhaW5lci5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbGluZVwiKSkgPz8gMFxyXG4gICAgICAgIGlmIChldmVudC5jdHJsS2V5KSB7XHJcbiAgICAgICAgICAgIGZvbGRIZWFkZXIodmlldywgc3RhcnRsaW5lKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9wZW5GaWxldG9saW5lKHZpZXcsIHN0YXJ0bGluZSlcclxuICAgICAgICAgICAgbGV0IHByZXZMb2NhdGlvbiA9IHN1YmNvbnRhaW5lci5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi50ZXh0LXdyYXAubG9jYXRlZFwiKVxyXG4gICAgICAgICAgICBpZiAocHJldkxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBwcmV2TG9jYXRpb24ucmVtb3ZlQ2xhc3MoXCJsb2NhdGVkXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3ViY29udGFpbmVyLmFkZENsYXNzKFwibG9jYXRlZFwiKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGxldCBwYXIgPSBzdWJjb250YWluZXIucXVlcnlTZWxlY3RvcihcInBcIik7XHJcbiAgICBpZiAocGFyKSB7XHJcbiAgICAgICAgY29uc3QgcmVnZXggPSAvPGFbXj5dKj58PFxcL1tePl0qYT4vZ207IC8vXHU1MjIwXHU5NjY0XHU2MjQwXHU2NzA5YVx1NjgwN1x1N0I3RVxyXG4gICAgICAgIC8vY29uc3QgcmVnZXggPSAvKD88PVxcPltePF0qPykgL2c7IC8vXHU1MjIwXHU5NjY0XHU2MjQwXHU2NzA5XHU3QTdBXHU3NjdEXHU3QjI2XHJcbiAgICAgICAgaWYgKHByZWxpc3QpIFxyXG4gICAgICAgIGF0YWcuaW5uZXJIVE1MID0gcHJlbGlzdCArIHBhci5pbm5lckhUTUwucmVwbGFjZShyZWdleCwgJycpO1xyXG4gICAgICAgIGVsc2UgYXRhZy5pbm5lckhUTUwgPSBwYXIuaW5uZXJIVE1MLnJlcGxhY2UocmVnZXgsICcnKTtcclxuICAgICAgICBzdWJjb250YWluZXIucmVtb3ZlQ2hpbGQocGFyKTtcclxuICAgIH1cclxuXHJcblxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlTGkodmlldzogTWFya2Rvd25WaWV3LCB1bF9kb206IEhUTUxFbGVtZW50LCBoZWFkaW5nOiBIZWFkaW5nQ2FjaGUsIGluZGV4OiBudW1iZXIpIHtcclxuICAgIGxldCBsaV9kb20gPSB1bF9kb20uY3JlYXRlRWwoXCJsaVwiKVxyXG4gICAgbGlfZG9tLmFkZENsYXNzKFwiaGVhZGluZy1saXN0LWl0ZW1cIilcclxuICAgIGxpX2RvbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWxldmVsXCIsIGhlYWRpbmcubGV2ZWwudG9TdHJpbmcoKSlcclxuICAgIGxpX2RvbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWlkXCIsIGluZGV4LnRvU3RyaW5nKCkpXHJcbiAgICBsaV9kb20uc2V0QXR0cmlidXRlKFwiZGF0YS1saW5lXCIsIGhlYWRpbmcucG9zaXRpb24uc3RhcnQubGluZS50b1N0cmluZygpKVxyXG4gICAgbGV0IHRleHRfZG9tID0gbGlfZG9tLmNyZWF0ZUVsKFwiZGl2XCIpXHJcbiAgICB0ZXh0X2RvbS5hZGRDbGFzcyhcInRleHQtd3JhcFwiKVxyXG5cclxuXHJcblxyXG4gICAgcmVuZGVySGVhZGVyKHZpZXcsIGhlYWRpbmcuaGVhZGluZywgdGV4dF9kb20sIHZpZXcuZmlsZS5wYXRoLCBudWxsKVxyXG5cclxuICAgIC8vIHRleHQuaW5uZXJIVE1MID0gaGVhZGluZy5oZWFkaW5nXHJcbiAgICBsZXQgbGluZV9kb20gPSBsaV9kb20uY3JlYXRlRWwoXCJkaXZcIilcclxuICAgIGxpbmVfZG9tLmFkZENsYXNzKFwibGluZS13cmFwXCIpXHJcbiAgICBsaW5lX2RvbS5jcmVhdGVEaXYoKS5hZGRDbGFzcyhcImxpbmVcIilcclxufVxyXG5cclxuY29uc3Qgb3BlbkZpbGV0b2xpbmUgPSAodmlldzogTWFya2Rvd25WaWV3LCBsaW5lTnVtYmVyOiBudW1iZXIpID0+IHtcclxuICAgIC8vY29uc3QgY3VycmVudF9maWxlID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpXHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coXCJsaW5lIG51bWJlclwiLCBsaW5lTnVtYmVyKTtcclxuICAgIC8vIGxldCBsZWFmID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XHJcbiAgICB2aWV3LmxlYWYub3BlbkZpbGUodmlldy5maWxlLCB7XHJcbiAgICAgICAgZVN0YXRlOiB7IGxpbmU6IGxpbmVOdW1iZXIgfSxcclxuICAgIH0pO1xyXG59O1xyXG5jb25zdCBmb2xkSGVhZGVyID0gKHZpZXc6IE1hcmtkb3duVmlldywgc3RhcnRsaW5lOiBudW1iZXIpID0+IHtcclxuICAgIC8vIGNvbnN0IHZpZXcgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldylcclxuICAgIGNvbnN0IGV4aXN0aW5nRm9sZHMgPSB2aWV3Py5jdXJyZW50TW9kZS5nZXRGb2xkSW5mbygpPy5mb2xkcyA/PyBbXTtcclxuICAgIGNvbnN0IGhlYWRmcm9tID0gc3RhcnRsaW5lXHJcbiAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgaWYgKGV4aXN0aW5nRm9sZHMuc29tZSgoaXRlbSwgaWR4KSA9PiB7IGluZGV4ID0gaWR4OyByZXR1cm4gaXRlbS5mcm9tID09IGhlYWRmcm9tIH0pKSAvL1x1NjgwN1x1OTg5OFx1NTM5Rlx1Njc2NVx1NURGMlx1N0VDRlx1NjI5OFx1NTNFMFx1NzJCNlx1NjAwMVxyXG4gICAgICAgIGV4aXN0aW5nRm9sZHMuc3BsaWNlKGluZGV4LCAxKTsgLy9cdTUyMjBcdTk2NjRcdTYyOThcdTUzRTBcdTcyQjZcdTYwMDFcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGxldCBoZWFkaW5nc0F0TGV2ZWwgPSB7XHJcbiAgICAgICAgICAgIGZyb206IHN0YXJ0bGluZSxcclxuICAgICAgICAgICAgdG86IHN0YXJ0bGluZSArIDEsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV4aXN0aW5nRm9sZHMucHVzaChoZWFkaW5nc0F0TGV2ZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHZpZXc/LmN1cnJlbnRNb2RlLmFwcGx5Rm9sZEluZm8oe1xyXG4gICAgICAgIGZvbGRzOiBleGlzdGluZ0ZvbGRzLFxyXG4gICAgICAgIGxpbmVzOiB2aWV3LmVkaXRvci5saW5lQ291bnQoKSxcclxuICAgIH0pO1xyXG4gICAgdmlldz8ub25NYXJrZG93bkZvbGQoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0VG9jKFxyXG4gICAgYXBwOiBBcHAsXHJcbiAgICBwbHVnaW46IEZsb2F0aW5nVG9jXHJcbik6IHZvaWQge1xyXG5cclxuICAgIGNvbnN0IGdlblRvYyA9IChjdXJyZW50bGVhZjogSFRNTEVsZW1lbnQsIGZsb2F0aW5nVG9jV3JhcHBlcjogSFRNTERpdkVsZW1lbnQpID0+IHtcclxuXHJcbiAgICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5wb3NpdGlvblN0eWxlID09IFwicmlnaHRcIilcclxuICAgICAgICAgICAgZmxvYXRpbmdUb2NXcmFwcGVyLmFkZENsYXNzKFwiZmxvYXRpbmctcmlnaHRcIiksIGZsb2F0aW5nVG9jV3JhcHBlci5yZW1vdmVDbGFzcyhcImZsb2F0aW5nLWxlZnRcIilcclxuICAgICAgICBlbHNlIGlmIChwbHVnaW4uc2V0dGluZ3MucG9zaXRpb25TdHlsZSA9PSBcImxlZnRcIilcclxuICAgICAgICAgICAgZmxvYXRpbmdUb2NXcmFwcGVyLmFkZENsYXNzKFwiZmxvYXRpbmctbGVmdFwiKSwgZmxvYXRpbmdUb2NXcmFwcGVyLnJlbW92ZUNsYXNzKFwiZmxvYXRpbmctcmlndGhcIilcclxuICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmlzTGVmdClcclxuICAgICAgICAgICAgZmxvYXRpbmdUb2NXcmFwcGVyLnJlbW92ZUNsYXNzKFwiYWxpZ25MZWZ0XCIpLCBmbG9hdGluZ1RvY1dyYXBwZXIuYWRkQ2xhc3MoXCJhbGlnbkxlZnRcIilcclxuICAgICAgICBlbHNlIGZsb2F0aW5nVG9jV3JhcHBlci5yZW1vdmVDbGFzcyhcImFsaWduTGVmdFwiKVxyXG4gICAgICAgIGxldCB1bF9kb20gPSBmbG9hdGluZ1RvY1dyYXBwZXIuY3JlYXRlRWwoXCJ1bFwiKVxyXG4gICAgICAgIHVsX2RvbS5hZGRDbGFzcyhcImZsb2F0aW5nLXRvY1wiKVxyXG4gICAgICAgIGxldCB0b29sYmFyID0gdWxfZG9tLmNyZWF0ZUVsKFwiZGl2XCIpXHJcbiAgICAgICAgdG9vbGJhci5hZGRDbGFzcyhcInRvb2xiYXJcIilcclxuICAgICAgICB0b29sYmFyLmFkZENsYXNzKFwicGluXCIpXHJcbiAgICAgICAgdG9vbGJhci5hZGRDbGFzcyhcImhpZGVcIilcclxuICAgICAgICBsZXQgcGluQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudCh0b29sYmFyKTtcclxuICAgICAgICBwaW5CdXR0b25cclxuICAgICAgICAgICAgLnNldEljb24oXCJwaW5cIilcclxuICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJwaW5cIilcclxuICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZsb2F0aW5nVG9jV3JhcHBlci5jbGFzc0xpc3QuY29udGFpbnMoXCJwaW5cIikpXHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdUb2NXcmFwcGVyLnJlbW92ZUNsYXNzKFwicGluXCIpXHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgZmxvYXRpbmdUb2NXcmFwcGVyLmFkZENsYXNzKFwicGluXCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB1bF9kb20ub25tb3VzZWVudGVyID0gZnVuY3Rpb24gKCkgeyAvL1x1NzlGQlx1NTE2NVx1NEU4Qlx1NEVGNlxyXG4gICAgICAgICAgICB0b29sYmFyLnJlbW92ZUNsYXNzKFwiaGlkZVwiKVxyXG4gICAgICAgICAgICBmbG9hdGluZ1RvY1dyYXBwZXIuYWRkQ2xhc3MoXCJob3ZlclwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICB1bF9kb20ub25tb3VzZWxlYXZlID0gZnVuY3Rpb24gKCkgeyAvL1x1NzlGQlx1NTFGQVx1NEU4Qlx1NEVGNlxyXG4gICAgICAgICAgICB0b29sYmFyLmFkZENsYXNzKFwiaGlkZVwiKVxyXG4gICAgICAgICAgICBmbG9hdGluZ1RvY1dyYXBwZXIucmVtb3ZlQ2xhc3MoXCJob3ZlclwiKVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdG9wQnV1dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudCh0b29sYmFyKTtcclxuICAgICAgICB0b3BCdXV0b25cclxuICAgICAgICAgICAgLnNldEljb24oXCJkb3VibGUtdXAtYXJyb3ctZ2x5cGhcIilcclxuICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJTY3JvbGwgdG8gVG9wXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInRvcFwiKVxyXG4gICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgICAgICAgICAgICAgIGlmICh2aWV3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRFcGhlbWVyYWxTdGF0ZSh7XCJzY3JvbGxcIjowfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IENvcHlCdXV0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KHRvb2xiYXIpO1xyXG4gICAgICAgICAgICBDb3B5QnV1dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0SWNvbihcImNvcHlcIilcclxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiY29weSB0byBjbGlwYm9hcmRcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcImNvcHlcIilcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaGVhZGVycyA9IGdsb2JhbFRoaXMuaGVhZGluZ2RhdGEubWFwKChoOkhlYWRpbmdDYWNoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIgICAgXCIucmVwZWF0KGgubGV2ZWwgLSAxKSArIGguaGVhZGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoaGVhZGVycy5qb2luKFwiXFxuXCIpKVxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDb3BpZWRcIilcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgIFxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRfZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpXHJcbiAgICAgXHJcbiAgICAgICAgbGV0IGhlYWRpbmcgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoY3VycmVudF9maWxlKS5oZWFkaW5nc1xyXG4gICAgICAgIGxldCBjbGVhbmhlYWRpbmc6IEhlYWRpbmdDYWNoZVtdPVtdXHJcbiAgICAgICAgaGVhZGluZz8ubWFwKChpdGVtOiBIZWFkaW5nQ2FjaGUpID0+IHtcclxuICAgICAgICAgICAgaXRlbS5oZWFkaW5nPWl0ZW0uaGVhZGluZy5yZXBsYWNlKC88XFwvP1tcXHNcXFNdKj8oPzpcIi4qXCIpKj4vZyxcIlwiKTsgLy8gY2xlYW4gaHRtbCB0YWdzXHJcbiAgICAgICAgICAgIGNsZWFuaGVhZGluZy5wdXNoKGl0ZW0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICBnbG9iYWxUaGlzLmhlYWRpbmdkYXRhID0gY2xlYW5oZWFkaW5nO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChnbG9iYWxUaGlzLmhlYWRpbmdkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MuaWdub3JlVG9wSGVhZGVyKVxyXG4gICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy5oZWFkaW5nZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShjdXJyZW50X2ZpbGUpLmhlYWRpbmdzLnNsaWNlKDEpO1xyXG4gICAgICAgICAgICBnbG9iYWxUaGlzLmhlYWRpbmdkYXRhLmZvckVhY2goKGhlYWRpbmc6IEhlYWRpbmdDYWNoZSwgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVMaSh2aWV3LCB1bF9kb20sIGhlYWRpbmcsIGluZGV4KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGN1cnJlbnRsZWFmXHJcbiAgICAgICAgICAgICAgICA/LnF1ZXJ5U2VsZWN0b3IoXCIubWFya2Rvd24tc291cmNlLXZpZXdcIilcclxuICAgICAgICAgICAgICAgIC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJiZWZvcmViZWdpblwiLCBmbG9hdGluZ1RvY1dyYXBwZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG4gICAgbGV0IE1hcmtkb3duID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgIGlmIChNYXJrZG93bikge1xyXG4gICAgICAgIHJlcXVpcmVBcGlWZXJzaW9uKFwiMC4xNS4wXCIpID8gYWN0aXZlRG9jdW1lbnQgPSBhY3RpdmVXaW5kb3cuZG9jdW1lbnQgOiBhY3RpdmVEb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudDtcclxuICAgICAgICBsZXQgdmlldyA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KVxyXG4gICAgICAgIGxldCBmbG9hdF90b2NfZG9tID0gdmlldy5jb250ZW50RWw/LnF1ZXJ5U2VsZWN0b3IoXCIuZmxvYXRpbmctdG9jLWRpdlwiKTtcclxuXHJcbiAgICAgICAgaWYgKCFmbG9hdF90b2NfZG9tKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZsb2F0aW5nVG9jV3JhcHBlciA9IGNyZWF0ZUVsKFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBmbG9hdGluZ1RvY1dyYXBwZXIuYWRkQ2xhc3MoXCJmbG9hdGluZy10b2MtZGl2XCIpO1xyXG5cclxuICAgICAgICAgICAgZ2VuVG9jKHZpZXcuY29udGVudEVsLCBmbG9hdGluZ1RvY1dyYXBwZXIpXHJcbiAgICAgICAgfSBlbHNlIHJldHVybjtcclxuICAgIH1cclxuXHJcbn0iLCAiaW1wb3J0IHR5cGUgRmxvYXRpbmdUb2MgZnJvbSBcInNyYy9tYWluXCI7XHJcbmltcG9ydCB7IEFwcCwgU2V0dGluZywgUGx1Z2luU2V0dGluZ1RhYiwgQnV0dG9uQ29tcG9uZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IFBPU0lUSU9OX1NUWUxFUyB9IGZyb20gXCJzcmMvc2V0dGluZ3Mvc2V0dGluZ3NEYXRhXCI7XHJcbmltcG9ydCB7IHNlbGZEZXN0cnVjdCB9IGZyb20gXCJzcmMvbWFpblwiO1xyXG5pbXBvcnQgeyBjcmVhdFRvYyB9IGZyb20gXCJzcmMvY29tcG9uZW50cy9mbG9hdGluZ3RvY1VJXCJcclxuaW1wb3J0IHsgdCB9IGZyb20gJ3NyYy90cmFuc2xhdGlvbnMvaGVscGVyJztcclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEZsb3RpbmdUT0NTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgcGx1Z2luOiBGbG9hdGluZ1RvYztcclxuICBhcHBlbmRNZXRob2Q6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRmxvYXRpbmdUb2MpIHtcclxuICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgYWRkRXZlbnRMaXN0ZW5lcihcInJlZnJlc2gtdG9jXCIsICgpID0+IHtcclxuICAgICAgc2VsZkRlc3RydWN0KCk7XHJcbiAgICAgIGNyZWF0VG9jKGFwcCwgdGhpcy5wbHVnaW4pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJPYnNpZGlhbiBGbG9hdGluZyBUT0MgXCIgfSk7XHJcbiAgICBjb250YWluZXJFbC5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBcIlwiIH0pLmNyZWF0ZUVsKFwiYVwiLCB7XHJcbiAgICAgIHRleHQ6IFwiQXV0aG9yOiBDdW1hbiBcdTI3MjhcIixcclxuICAgICAgaHJlZjogXCJodHRwczovL2dpdGh1Yi5jb20vY3VtYW55XCIsXHJcbiAgICB9KVxyXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogXCJcIiB9KS5jcmVhdGVFbChcImFcIiwge1xyXG4gICAgICB0ZXh0OiBcIlJlYWRtZTpcdTRFMkRcdTY1ODdcIixcclxuICAgICAgaHJlZjogXCJodHRwczovL2dpdGh1Yi5jb20vY3VtYW55L29ic2lkaWFuLWZsb2F0aW5nLXRvYy1wbHVnaW4vYmxvYi9tYXN0ZXIvUkVBRE1FLXpoX2NuLm1kXCIsXHJcbiAgICB9KVxyXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogXCJcIiB9KS5jcmVhdGVFbChcImFcIiwge1xyXG4gICAgICB0ZXh0OiBcInxFbmdsaXNoICBcIixcclxuICAgICAgaHJlZjogXCJodHRwczovL2dpdGh1Yi5jb20vY3VtYW55L29ic2lkaWFuLWZsb2F0aW5nLXRvYy1wbHVnaW4vYmxvYi9tYXN0ZXIvUkVBRE1FLm1kXCIsXHJcbiAgICB9KTtcclxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiXHVEODNEXHVERDExVElQUzogXCIgfSlcclxuICAgICAgLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgdGV4dDogXCJjdHJsICsgY2xpY2sgb24gdGhlIGZsb2F0aW5nIHRvYyB0byBjb2xsYXBzZS9leHBhbmQgdGhlIGhlYWRlci5cIlxyXG4gICAgICB9KTtcclxuICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiB0KFwiUGx1Z2luIFNldHRpbmdzXCIpIH0pO1xyXG4gICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKHQoJ0Zsb2F0aW5nIFRPQyBwb3NpdGlvbicpXHJcbiAgICAgIClcclxuICAgICAgLnNldERlc2ModCgnRmxvYXRpbmcgVE9DIHBvc2l0aW9uLCBkZWZhdWx0IG9uIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIG5vdGVzJylcclxuICAgICAgKVxyXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgbGV0IHBvc290aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xyXG4gICAgICAgIFBPU0lUSU9OX1NUWUxFUy5tYXAoKHBvc290aW9uOiBzdHJpbmcpID0+IChwb3NvdGlvbnNbcG9zb3Rpb25dID0gcG9zb3Rpb24pKTtcclxuICAgICAgICBkcm9wZG93bi5hZGRPcHRpb25zKHBvc290aW9ucyk7XHJcbiAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wb3NpdGlvblN0eWxlKVxyXG4gICAgICAgICAgLm9uQ2hhbmdlKChwb3NpdGlvblN0eWxlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucG9zaXRpb25TdHlsZSA9IHBvc2l0aW9uU3R5bGU7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICBkaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInJlZnJlc2gtdG9jXCIpKTtcclxuICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgaWYodGhpcy5wbHVnaW4uc2V0dGluZ3MucG9zaXRpb25TdHlsZT09XCJyaWdodFwiKXtcclxuICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgIC5zZXROYW1lKHQoJ0xlZnQgQWxpZ25lZCcpXHJcbiAgICAgIClcclxuICAgICAgLnNldERlc2MoXHJcbiAgICAgICAgdChcIndoZXRoZXIgaXQgaXMgbGVmdCBvciByaWdodCBhbGlnbmVkIFdoZW4gdGhlIGZsb2F0aW5nIHRvYyBpcyBvbiB0aGUgcmlnaHRcIilcclxuICAgICAgKVxyXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3M/LmlzTGVmdClcclxuICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc0xlZnQgPSB2YWx1ZTtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICBkaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcInJlZnJlc2gtdG9jXCIpKTtcclxuICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICB9XHJcbiAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUodCgnTW9iaWxlIGVuYWJsZWQgb3Igbm90JylcclxuICAgICAgKVxyXG4gICAgICAuc2V0RGVzYyhcclxuICAgICAgICB0KFwiV2hldGhlciB0byBlbmFibGUgdGhlIHBsdWdpbiBmb3IgdGhlIG1vYmlsZSBjbGllbnQsIHRoZSBkZWZhdWx0IGlzIGVuYWJsZWQuXCIpXHJcbiAgICAgIClcclxuICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzPy5pc0xvYWRPbk1vYmlsZSlcclxuICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc0xvYWRPbk1vYmlsZSA9IHZhbHVlO1xyXG4gICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJyZWZyZXNoLXRvY1wiKSk7XHJcbiAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgIH0pKTtcclxuICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgLnNldE5hbWUodCgnSWdub3JlIHRvcC1sZXZlbCBoZWFkZXJzJylcclxuICAgICAgKVxyXG4gICAgICAuc2V0RGVzYyhcclxuICAgICAgICB0KFwiU2VsZWN0IHdoZXRoZXIgdG8gaWdub3JlIHRoZSB0b3AtbGV2ZWwgaGVhZGluZ3MuIFdoZW4gdHVybmVkIG9uLCB0aGUgdG9wLWxldmVsIGhlYWRpbmdzIGluIHRoZSBjdXJyZW50IG5vdGUgYXJlIG5vdCBkaXNwbGF5ZWQgaW4gdGhlIGZsb2F0aW5nIFRPQy5cIilcclxuICAgICAgKVxyXG4gICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3M/Lmlnbm9yZVRvcEhlYWRlcilcclxuICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZ25vcmVUb3BIZWFkZXIgPSB2YWx1ZTtcclxuICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwicmVmcmVzaC10b2NcIikpO1xyXG4gICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICB9KSk7IFxyXG4gICAgY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IHQoXCJQbHVnaW4gU3R5bGUgU2V0dGluZ3NcIikgfSk7XHJcblxyXG4gICAgY29uc3QgaXNFbmFibGVkID0gYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKFwib2JzaWRpYW4tc3R5bGUtc2V0dGluZ3NcIik7XHJcbiAgICBpZiAoaXNFbmFibGVkKSB7XHJcbiAgICAgIFxyXG4gICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIlx1RDgzRFx1REQxNE5vdGljZTogXCIgfSlcclxuICAgICAgLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgdGV4dDogdChcIklmIHRoZSBmbG9hdGluZyBUb2Mgb3B0aW9uIGlzIG5vdCBmb3VuZCBpbiB0aGUgc3R5bGUgc2V0dGluZywgcGxlYXNlIHJlbG9hZCB0aGUgc3R5bGUgc2V0dGluZyBwbHVnaW4gKHR1cm4gaXQgb2ZmIGFuZCBvbiBhZ2FpbilcIilcclxuICAgICAgfSk7XHJcbiAgICAgIGxldCBidXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRhaW5lckVsKTtcclxuICAgICAgYnV0dG9uXHJcbiAgICAgICAgLnNldEljb24oXCJwYWxldHRlXCIpXHJcbiAgICAgICAgLnNldENsYXNzKFwidGlueVwiKVxyXG4gICAgICAgIC5zZXRCdXR0b25UZXh0KFwiXHVEODNDXHVERkE4IE9wZW4gc3R5bGUgc2V0dGluZ3NcIilcclxuICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICBhcHAuc2V0dGluZy5vcGVuKCk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGFwcC5zZXR0aW5nLm9wZW5UYWJCeUlkKFwib2JzaWRpYW4tc3R5bGUtc2V0dGluZ3NcIiksIDMwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb250YWluZXJFbC5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBcIlwiIH0pLmNyZWF0ZUVsKFwiYVwiLCB7XHJcbiAgICAgICAgdGV4dDogXCJQbGVhc2UgaW5zdGFsbCBvciBlbmFibGUgdGhlIHN0eWxlLXNldHRpbmdzIHBsdWdpblwiLFxyXG4gICAgICAgIGhyZWY6IFwib2JzaWRpYW46Ly9zaG93LXBsdWdpbj9pZD1vYnNpZGlhbi1zdHlsZS1zZXR0aW5nc1wiLFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBjb25zdCBjRG9uYXRpb25EaXYgPSBjb250YWluZXJFbC5jcmVhdGVFbChcImRpdlwiLCB7XHJcbiAgICAgIGNsczogXCJjRG9uYXRpb25TZWN0aW9uXCIsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBjcmVkaXQgPSBjcmVhdGVFbChcInBcIik7XHJcbiAgICBjb25zdCBkb25hdGVUZXh0ID0gY3JlYXRlRWwoXCJwXCIpO1xyXG4gICAgZG9uYXRlVGV4dC5hcHBlbmRUZXh0KFxyXG4gICAgICBcIklmIHlvdSBsaWtlIHRoaXMgUGx1Z2luIGFuZCBhcmUgY29uc2lkZXJpbmcgZG9uYXRpbmcgdG8gc3VwcG9ydCBjb250aW51ZWQgZGV2ZWxvcG1lbnQsIHVzZSB0aGUgYnV0dG9uIGJlbG93IVwiXHJcbiAgICApO1xyXG4gICAgY3JlZGl0LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpXCIpO1xyXG4gICAgY0RvbmF0aW9uRGl2LmFwcGVuZENoaWxkKGRvbmF0ZVRleHQpO1xyXG4gICAgY0RvbmF0aW9uRGl2LmFwcGVuZENoaWxkKGNyZWRpdCk7XHJcblxyXG4gICAgY0RvbmF0aW9uRGl2LmFwcGVuZENoaWxkKFxyXG4gICAgICBjcmVhdGVEb25hdGVCdXR0b24oXCJodHRwczovL2dpdGh1Yi5jb20vY3VtYW55I3RoYW5rLXlvdS12ZXJ5LW11Y2gtZm9yLXlvdXItc3VwcG9ydFwiKVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IGNyZWF0ZURvbmF0ZUJ1dHRvbiA9IChsaW5rOiBzdHJpbmcpOiBIVE1MRWxlbWVudCA9PiB7XHJcbiAgY29uc3QgYSA9IGNyZWF0ZUVsKFwiYVwiKTtcclxuICBhLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgbGluayk7XHJcbiAgYS5hZGRDbGFzcyhcImJ1eW1lYWNvZmZlZS1pbWdcIik7XHJcbiAgYS5pbm5lckhUTUwgPSBgPGltZyBzcmM9XCJodHRwczovL2ltZy5idXltZWFjb2ZmZWUuY29tL2J1dHRvbi1hcGkvP3RleHQ9QnV5IG1lIGEgY29mZmVlICZlbW9qaT0mc2x1Zz1DdW1hbiZidXR0b25fY29sb3VyPUJENUZGRiZmb250X2NvbG91cj1mZmZmZmYmZm9udF9mYW1pbHk9UG9wcGlucyZvdXRsaW5lX2NvbG91cj0wMDAwMDAmY29mZmVlX2NvbG91cj1GRkREMDBcIiAvPmA7XHJcbiAgcmV0dXJuIGE7XHJcbn07XHJcblxyXG5cclxuXHJcbiIsICJcclxuXHJcbmV4cG9ydCBjb25zdCBQT1NJVElPTl9TVFlMRVMgPSBbXCJsZWZ0XCIsIFwicmlnaHRcIl07XHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBGbG90aW5nVE9DU2V0dGluZyB7XHJcbiAgaWdub3JlVG9wSGVhZGVyOiBib29sZWFuO1xyXG4gIHBvc2l0aW9uU3R5bGU6IHN0cmluZztcclxuICBpc0xvYWRPbk1vYmlsZTpib29sZWFuO1xyXG4gIGlzTGVmdDpib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRmxvdGluZ1RPQ1NldHRpbmcgPSB7XHJcbiAgaWdub3JlVG9wSGVhZGVyOiBmYWxzZSxcclxuICBwb3NpdGlvblN0eWxlOiBcImxlZnRcIixcclxuICBpc0xvYWRPbk1vYmlsZTogdHJ1ZSxcclxuICBpc0xlZnQ6IGZhbHNlXHJcbn07XHJcbiIsICIvLyBDb2RlIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3ZhbGVudGluZTE5NS9vYnNpZGlhbi1hZG1vbml0aW9uL2Jsb2IvbWFzdGVyL3NyYy9sYW5nL2hlbHBlcnMudHNcclxuXHJcbmltcG9ydCB7IG1vbWVudCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCBhciBmcm9tICcuL2xvY2FsZS9hcic7XHJcbmltcG9ydCBjeiBmcm9tICcuL2xvY2FsZS9jeic7XHJcbmltcG9ydCBkYSBmcm9tICcuL2xvY2FsZS9kYSc7XHJcbmltcG9ydCBkZSBmcm9tICcuL2xvY2FsZS9kZSc7XHJcbmltcG9ydCBlbiBmcm9tICcuL2xvY2FsZS9lbic7XHJcbmltcG9ydCBlbkdCIGZyb20gJy4vbG9jYWxlL2VuLWdiJztcclxuaW1wb3J0IGVzIGZyb20gJy4vbG9jYWxlL2VzJztcclxuaW1wb3J0IGZyIGZyb20gJy4vbG9jYWxlL2ZyJztcclxuaW1wb3J0IGhpIGZyb20gJy4vbG9jYWxlL2hpJztcclxuaW1wb3J0IGlkIGZyb20gJy4vbG9jYWxlL2lkJztcclxuaW1wb3J0IGl0IGZyb20gJy4vbG9jYWxlL2l0JztcclxuaW1wb3J0IGphIGZyb20gJy4vbG9jYWxlL2phJztcclxuaW1wb3J0IGtvIGZyb20gJy4vbG9jYWxlL2tvJztcclxuaW1wb3J0IG5sIGZyb20gJy4vbG9jYWxlL25sJztcclxuaW1wb3J0IG5vIGZyb20gJy4vbG9jYWxlL25vJztcclxuaW1wb3J0IHBsIGZyb20gJy4vbG9jYWxlL3BsJztcclxuaW1wb3J0IHB0IGZyb20gJy4vbG9jYWxlL3B0JztcclxuaW1wb3J0IHB0QlIgZnJvbSAnLi9sb2NhbGUvcHQtYnInO1xyXG5pbXBvcnQgcm8gZnJvbSAnLi9sb2NhbGUvcm8nO1xyXG5pbXBvcnQgcnUgZnJvbSAnLi9sb2NhbGUvcnUnO1xyXG5pbXBvcnQgdHIgZnJvbSAnLi9sb2NhbGUvdHInO1xyXG5pbXBvcnQgemhDTiBmcm9tICcuL2xvY2FsZS96aC1jbic7XHJcbmltcG9ydCB6aFRXIGZyb20gJy4vbG9jYWxlL3poLXR3JztcclxuXHJcbmNvbnN0IGxvY2FsZU1hcDogeyBbazogc3RyaW5nXTogUGFydGlhbDx0eXBlb2YgZW4+IH0gPSB7XHJcbiAgYXIsXHJcbiAgY3M6IGN6LFxyXG4gIGRhLFxyXG4gIGRlLFxyXG4gIGVuLFxyXG4gICdlbi1nYic6IGVuR0IsXHJcbiAgZXMsXHJcbiAgZnIsXHJcbiAgaGksXHJcbiAgaWQsXHJcbiAgaXQsXHJcbiAgamEsXHJcbiAga28sXHJcbiAgbmwsXHJcbiAgbm46IG5vLFxyXG4gIHBsLFxyXG4gIHB0LFxyXG4gICdwdC1icic6IHB0QlIsXHJcbiAgcm8sXHJcbiAgcnUsXHJcbiAgdHIsXHJcbiAgJ3poLWNuJzogemhDTixcclxuICAnemgtdHcnOiB6aFRXLFxyXG59O1xyXG5cclxuY29uc3QgbG9jYWxlID0gbG9jYWxlTWFwW21vbWVudC5sb2NhbGUoKV07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdChzdHI6IGtleW9mIHR5cGVvZiBlbik6IHN0cmluZyB7XHJcbiAgcmV0dXJuIChsb2NhbGUgJiYgbG9jYWxlW3N0cl0pIHx8IGVuW3N0cl07XHJcbn1cclxuIiwgIi8vIFx1MDYyN1x1MDY0NFx1MDYzOVx1MDYzMVx1MDYyOFx1MDY0QVx1MDYyOVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge307XHJcbiIsICIvLyBcdTAxMERlXHUwMTYxdGluYVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge307XHJcbiIsICIvLyBEYW5za1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge307XHJcbiIsICIvLyBEZXV0c2NoXHJcblxyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuIiwgImV4cG9ydCBkZWZhdWx0IHtcclxuICAgICdGbG9hdGluZyBUT0MgcG9zaXRpb24nOidGbG9hdGluZyBUT0MgcG9zaXRpb24nLFxyXG4gICAgJ0Zsb2F0aW5nIFRPQyBwb3NpdGlvbiwgZGVmYXVsdCBvbiB0aGUgbGVmdCBzaWRlIG9mIHRoZSBub3Rlcyc6J0Zsb2F0aW5nIFRPQyBwb3NpdGlvbiwgZGVmYXVsdCBvbiB0aGUgbGVmdCBzaWRlIG9mIHRoZSBub3RlcycsXHJcbiAgICAnSWdub3JlIHRvcC1sZXZlbCBoZWFkZXJzJzonSWdub3JlIHRvcC1sZXZlbCBoZWFkZXJzJyxcclxuICAgICdTZWxlY3Qgd2hldGhlciB0byBpZ25vcmUgdGhlIHRvcC1sZXZlbCBoZWFkaW5ncy4gV2hlbiB0dXJuZWQgb24sIHRoZSB0b3AtbGV2ZWwgaGVhZGluZ3MgaW4gdGhlIGN1cnJlbnQgbm90ZSBhcmUgbm90IGRpc3BsYXllZCBpbiB0aGUgZmxvYXRpbmcgVE9DLic6J1NlbGVjdCB3aGV0aGVyIHRvIGlnbm9yZSB0aGUgdG9wLWxldmVsIGhlYWRpbmdzLiBXaGVuIHR1cm5lZCBvbiwgdGhlIHRvcC1sZXZlbCBoZWFkaW5ncyBpbiB0aGUgY3VycmVudCBub3RlIGFyZSBub3QgZGlzcGxheWVkIGluIHRoZSBmbG9hdGluZyBUT0MuJywgICAgXHJcbiAgICAnUGx1Z2luIFNldHRpbmdzJzonUGx1Z2luIFNldHRpbmdzJyxcclxuICAgICdQbHVnaW4gU3R5bGUgU2V0dGluZ3MnOiAnUGx1Z2luIFN0eWxlIFNldHRpbmdzJyxcclxuICAgICdNb2JpbGUgZW5hYmxlZCBvciBub3QnOidNb2JpbGUgZW5hYmxlZCBvciBub3QnLFxyXG4gICAgJ1doZXRoZXIgdG8gZW5hYmxlIHRoZSBwbHVnaW4gZm9yIHRoZSBtb2JpbGUgY2xpZW50LCB0aGUgZGVmYXVsdCBpcyBlbmFibGVkLic6J1doZXRoZXIgdG8gZW5hYmxlIHRoZSBwbHVnaW4gZm9yIHRoZSBtb2JpbGUgY2xpZW50LCB0aGUgZGVmYXVsdCBpcyBlbmFibGVkLicsXHJcbiAgICAnSWYgdGhlIGZsb2F0aW5nIFRvYyBvcHRpb24gaXMgbm90IGZvdW5kIGluIHRoZSBzdHlsZSBzZXR0aW5nLCBwbGVhc2UgcmVsb2FkIHRoZSBzdHlsZSBzZXR0aW5nIHBsdWdpbiAodHVybiBpdCBvZmYgYW5kIG9uIGFnYWluKSc6J0lmIHRoZSBmbG9hdGluZyBUb2Mgb3B0aW9uIGlzIG5vdCBmb3VuZCBpbiB0aGUgc3R5bGUgc2V0dGluZywgcGxlYXNlIHJlbG9hZCB0aGUgc3R5bGUgc2V0dGluZyBwbHVnaW4gKHR1cm4gaXQgb2ZmIGFuZCBvbiBhZ2FpbiknLFxyXG4gICAgJ0xlZnQgQWxpZ25lZCc6J0xlZnQgQWxpZ25lZCcsXHJcbiAgICAnd2hldGhlciBpdCBpcyBsZWZ0IG9yIHJpZ2h0IGFsaWduZWQgV2hlbiB0aGUgZmxvYXRpbmcgdG9jIGlzIG9uIHRoZSByaWdodCc6J3doZXRoZXIgaXQgaXMgbGVmdCBvciByaWdodCBhbGlnbmVkIFdoZW4gdGhlIGZsb2F0aW5nIHRvYyBpcyBvbiB0aGUgcmlnaHQnXHJcbn07XHJcbiIsICIvLyBCcml0aXNoIEVuZ2xpc2hcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHt9O1xyXG4iLCAiLy8gRXNwYVx1MDBGMW9sXHJcblxyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuIiwgImV4cG9ydCBkZWZhdWx0IHt9O1xyXG4iLCAiLy8gXHUwOTM5XHUwOTNGXHUwOTI4XHUwOTREXHUwOTI2XHUwOTQwXHJcblxyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuIiwgIi8vIEJhaGFzYSBJbmRvbmVzaWFcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHt9O1xyXG4iLCAiLy8gSXRhbGlhbm9cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHt9O1xyXG4iLCAiLy8gXHU2NUU1XHU2NzJDXHU4QTlFXHJcblxyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuIiwgIi8vIFx1RDU1Q1x1QUQ2RFx1QzVCNFxyXG5cclxuZXhwb3J0IGRlZmF1bHQge307XHJcbiIsICIvLyBOZWRlcmxhbmRzXHJcblxyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuIiwgIi8vIE5vcnNrXHJcblxyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuIiwgIi8vIGpcdTAxMTl6eWsgcG9sc2tpXHJcblxyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuIiwgImV4cG9ydCBkZWZhdWx0IHt9O1xyXG4iLCAiZXhwb3J0IGRlZmF1bHQge307XHJcbiIsICIvLyBSb21cdTAwRTJuXHUwMTAzXHJcblxyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuIiwgIi8vIFx1MDQ0MFx1MDQ0M1x1MDQ0MVx1MDQ0MVx1MDQzQVx1MDQzOFx1MDQzOVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge307XHJcbiIsICIvLyBUXHUwMEZDcmtcdTAwRTdlXHJcblxyXG5leHBvcnQgZGVmYXVsdCB7fTtcclxuIiwgImV4cG9ydCBkZWZhdWx0IHtcclxuICAvLyBzZXR0aW5nLnRzXHJcbiAgJ0Zsb2F0aW5nIFRPQyBwb3NpdGlvbic6ICdcdTZENkVcdTUyQThcdTc2RUVcdTVGNTVcdTY2M0VcdTc5M0FcdTRGNERcdTdGNkUnLFxyXG4gICdGbG9hdGluZyBUT0MgcG9zaXRpb24sIGRlZmF1bHQgb24gdGhlIGxlZnQgc2lkZSBvZiB0aGUgbm90ZXMnOiAnXHU2RDZFXHU1MkE4XHU3NkVFXHU1RjU1XHU2NjNFXHU3OTNBXHU0RjREXHU3RjZFXHVGRjBDXHU5RUQ4XHU4QkE0XHU2NjNFXHU3OTNBXHU1NzI4XHU3QjE0XHU4QkIwXHU1REU2XHU0RkE3JyxcclxuICAnSWdub3JlIHRvcC1sZXZlbCBoZWFkZXJzJzogJ1x1NjYyRlx1NTQyNlx1NUZGRFx1NzU2NVx1OTg3Nlx1N0VBN1x1NzZFRVx1NUY1NScsXHJcbiAgJ1NlbGVjdCB3aGV0aGVyIHRvIGlnbm9yZSB0aGUgdG9wLWxldmVsIGhlYWRpbmdzLiBXaGVuIHR1cm5lZCBvbiwgdGhlIHRvcC1sZXZlbCBoZWFkaW5ncyBpbiB0aGUgY3VycmVudCBub3RlIGFyZSBub3QgZGlzcGxheWVkIGluIHRoZSBmbG9hdGluZyBUT0MuJzogJ1x1OTAwOVx1NjJFOVx1NjYyRlx1NTQyNlx1NUZGRFx1NzU2NVx1OTg3Nlx1N0VBN1x1NjgwN1x1OTg5OFx1RkYwQ1x1NUYwMFx1NTQyRlx1NTQwRVx1NUY1M1x1NTI0RFx1NjU4N1x1Njg2M1x1NEUyRFx1NjcwMFx1OTg3Nlx1N0VBN1x1NzY4NFx1NjgwN1x1OTg5OFx1NEUwRFx1NjYzRVx1NzkzQVx1NTcyOFx1NkQ2RVx1NTJBOFx1NzZFRVx1NUY1NVx1NEUyRFx1MzAwMicsXHJcbiAgJ1BsdWdpbiBTZXR0aW5ncyc6ICdcdTYzRDJcdTRFRjZcdThCQkVcdTdGNkUnLFxyXG4gICdQbHVnaW4gU3R5bGUgU2V0dGluZ3MnOiAnXHU2M0QyXHU0RUY2XHU2ODM3XHU1RjBGXHU4QkJFXHU3RjZFJyxcclxuICAnTW9iaWxlIGVuYWJsZWQgb3Igbm90JzogJ1x1NjYyRlx1NTQyNlx1NTcyOFx1NzlGQlx1NTJBOFx1N0FFRlx1NTQyRlx1NzUyOCcsXHJcbiAgJ1doZXRoZXIgdG8gZW5hYmxlIHRoZSBwbHVnaW4gZm9yIHRoZSBtb2JpbGUgY2xpZW50LCB0aGUgZGVmYXVsdCBpcyBlbmFibGVkLic6J1x1NzlGQlx1NTJBOFx1NUJBMlx1NjIzN1x1N0FFRlx1NjYyRlx1NTQyNlx1NTQyRlx1NzUyOFx1NjNEMlx1NEVGNlx1RkYwQ1x1OUVEOFx1OEJBNFx1NTQyRlx1NzUyOFx1MzAwMicsXHJcbiAgJ0lmIHRoZSBmbG9hdGluZyBUb2Mgb3B0aW9uIGlzIG5vdCBmb3VuZCBpbiB0aGUgc3R5bGUgc2V0dGluZywgcGxlYXNlIHJlbG9hZCB0aGUgc3R5bGUgc2V0dGluZyBwbHVnaW4gKHR1cm4gaXQgb2ZmIGFuZCBvbiBhZ2FpbiknOidcdTU5ODJcdTY3OUNzdHlsZSBzZXR0aW5nIFx1NEUyRFx1NjVFMFx1NkNENVx1NzcwQlx1NTIzMCBmbG9hdGluZyBUb2NcdTkwMDlcdTk4NzlcdUZGMENcdThCRjdcdTkxQ0RcdThGN0RzdHlsZSBzZXR0aW5nXHU2M0QyXHU0RUY2XHVGRjA4XHU1MTczXHU5NUVEXHU1MThEXHU1RjAwXHU1NDJGXHU1MzczXHU1M0VGXHVGRjA5JyxcclxuICAnTGVmdCBBbGlnbmVkJzonXHU1REU2XHU1QkY5XHU5RjUwJyxcclxuICAnd2hldGhlciBpdCBpcyBsZWZ0IG9yIHJpZ2h0IGFsaWduZWQgV2hlbiB0aGUgZmxvYXRpbmcgdG9jIGlzIG9uIHRoZSByaWdodCc6J1x1NUY1M1x1NURFNVx1NTE3N1x1NjgwRlx1NTcyOFx1NTNGM1x1NEZBN1x1NjVGNlx1RkYwQ1x1NjYyRlx1NTQyNlx1NURFNlx1NUJGOVx1OUY1MCdcclxufTtcclxuIiwgIi8vIFx1N0U0MVx1OUFENFx1NEUyRFx1NjU4N1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge307XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7OzZ5QkFBQSx5RUFBK0YsdUJDRS9GLE1BQTZILHVCQUc3SCxXQUNJLEVBQ0EsRUFDQSxFQUNBLEVBQ0EsRUFBdUIsS0FDekIsZ0NBQ0UsR0FBTSxHQUFRLHNCQUNSLEVBQVMsb0JBQ1gsRUFDQSxFQUFVLEdBQ2QsQUFBSyxHQUFJLEVBQU0sS0FBSyxNQUFhLEtBQzdCLEdBQVUsRUFBRSxHQUNaLEVBQVMsRUFBTyxRQUFRLEVBQU8sS0FDdkIsR0FBSSxFQUFPLEtBQUssTUFBYSxNQUNyQyxHQUFVLEVBQUUsR0FDWixFQUFTLEVBQU8sUUFBUSxFQUFRLEtBRXBDLEdBQUksR0FBZSxFQUNuQixLQUFNLG9CQUFpQixlQUNuQixFQUNBLEVBQ0EsRUFDQSxHQUVKLEdBQUksR0FBTyxFQUFhLFNBQVMsS0FDakMsRUFBSyxTQUFTLFFBQ2QsRUFBSyxRQUFVLFNBQVUsRUFBTyxDQWhDcEMsTUFpQ1EsR0FBSSxHQUFZLFlBQVMsRUFBYSxjQUFjLGFBQWEsZ0JBQWpELE9BQWtFLEVBQ2xGLEdBQUksRUFBTSxRQUNOLEdBQVcsRUFBTSxPQUNkLENBQ0gsR0FBZSxFQUFNLEdBQ3JCLEdBQUksR0FBZSxFQUFhLGNBQWMsY0FBYyxjQUFjLHNCQUMxRSxBQUFJLEdBQ0EsRUFBYSxZQUFZLFdBRTdCLEVBQWEsU0FBUyxhQUc5QixHQUFJLEdBQU0sRUFBYSxjQUFjLEtBQ3JDLEdBQUksRUFBSyxDQUNM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
